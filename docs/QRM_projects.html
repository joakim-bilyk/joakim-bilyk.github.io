<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Projects in Quantitative Risk Management</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="https://code.jquery.com/jquery-1.9.1.js"></script>

<script>
    $(function() {
        var element = document.body;
        if (localStorage.chkbx && localStorage.chkbx != '') {
            $('#remember_me').attr('checked', 'checked');
            element.classList.toggle("dark-mode");
        } else {
            $('#remember_me').removeAttr('checked');
        }

        $('#remember_me').click(function() {

            if ($('#remember_me').is(':checked')) {
                // save username and password
                localStorage.chkbx = $('#remember_me').val();
                element.classList.toggle("dark-mode");
            } else {
                localStorage.chkbx = '';
                element.classList.toggle("dark-mode");
            }
        });
    });

</script>

<div class = "sticky-darkmode-toggle">
  <label class="switch">
  <input type="checkbox" value="remember-me" id="remember_me">
  <span class="slider round">
  </span>
  </label>
</div>

<style>

.sticky-darkmode-toggle {
  position: fixed;
  right: 20px;
  bottom: 20px;
}
</style>

<script>
function myFunction() {
   var element = document.body;
   element.classList.toggle("dark-mode");
}
</script>

<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<style>
#myBtn {
  display: none; /* Hidden by default */
  position: fixed; /* Fixed/sticky position */
  bottom: 20px; /* Place the button at the bottom of the page */
  left: 30px; /* Place the button 30px from the right */
  z-index: 99; /* Make sure it does not overlap */
  border: none; /* Remove borders */
  outline: none; /* Remove outline */
  padding: 15px; /* Some padding */
  border-radius: 10px; /* Rounded corners */
  font-size: 18px; /* Increase font size */
}

#myBtn:hover {
  background-color: #555; /* Add a dark-grey background on hover */
}
</style>

<script>

// Get the button:
let mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #232629;
    color: #7a7c7d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
div.sourceCode
  { color: #cfcfc2; background-color: #232629; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #cfcfc2; } /* Normal */
code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
code span.an { color: #3f8058; } /* Annotation */
code span.at { color: #2980b9; } /* Attribute */
code span.bn { color: #f67400; } /* BaseN */
code span.bu { color: #7f8c8d; } /* BuiltIn */
code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #3daee9; } /* Char */
code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
code span.co { color: #7a7c7d; } /* Comment */
code span.cv { color: #7f8c8d; } /* CommentVar */
code span.do { color: #a43340; } /* Documentation */
code span.dt { color: #2980b9; } /* DataType */
code span.dv { color: #f67400; } /* DecVal */
code span.er { color: #da4453; text-decoration: underline; } /* Error */
code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
code span.fl { color: #f67400; } /* Float */
code span.fu { color: #8e44ad; } /* Function */
code span.im { color: #27ae60; } /* Import */
code span.in { color: #c45b00; } /* Information */
code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
code span.op { color: #cfcfc2; } /* Operator */
code span.ot { color: #27ae60; } /* Other */
code span.pp { color: #27ae60; } /* Preprocessor */
code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #da4453; } /* SpecialString */
code span.st { color: #f44f4f; } /* String */
code span.va { color: #27aeae; } /* Variable */
code span.vs { color: #da4453; } /* VerbatimString */
code span.wa { color: #da4453; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Candidate Cources</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="books/theory/index.html">Theory</a>
</li>
<li>
  <a href="books/exercises/index.html">Exercises</a>
</li>
<li>
  <a href="books/exam/index.html">Examprep</a>
</li>
<li>
  <a href="https://github.com/joakim-bilyk/act-math">Repository</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="pdf_renders.html">Archive</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Projects in Quantitative Risk
Management</h1>

</div>


<div id="assignment-1" class="section level1">
<h1>Assignment 1</h1>
<iframe src="pdf/render/QRM-Assignment1.pdf">
</iframe>
</div>
<div id="assignment-2" class="section level1">
<h1>Assignment 2</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;QRM/QRM-Assignment2.Rmd&#39;</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_file =</span> <span class="st">&quot;QRM-Assignment2.pdf&quot;</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_dir =</span> <span class="st">&quot;pdf/render&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<iframe src="pdf/render/QRM-Assignment2.pdf">
</iframe>
<div id="problem-1" class="section level2">
<h2>Problem 1</h2>
<div id="a-gaussian-copula." class="section level3">
<h3>(a) Gaussian copula.</h3>
<p>To simulate from a gaussian copula, we have followed the algorithm
found on page 74 in the HL notes. To find <span
class="math inline">\(R\)</span> we have used the <span
class="math inline">\(R_{i,j}\)</span> formula found on page 80 besides
the gaussian copula. Futhermore notice the the diagonal of <span
class="math inline">\(R\)</span>. To find the cholesky decomposition we
use the build-in function <code>chol()</code> in R. From this algorithm
we find the estimates to be;</p>
<p><span class="math display">\[
VaR_{0.99}(L)= 206.166  ,\hspace{30pt} ES_{0.99}(L)= 244.369
\]</span></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#We follow algorithm 10.1 to model the dependence structure of the ....</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>R_ij <span class="ot">&lt;-</span><span class="fu">sin</span>(pi<span class="sc">*</span><span class="fl">0.4</span><span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">rep</span>(R_ij,<span class="dv">50</span><span class="sc">*</span><span class="dv">50</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>R <span class="ot">&lt;-</span> <span class="fu">matrix</span>(S, <span class="at">nrow =</span> <span class="dv">50</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(R) <span class="ot">&lt;-</span> <span class="fu">sin</span>(pi<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Now we have created R in algorithm</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">chol</span>(R)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>L <span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  Z <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  X <span class="ot">&lt;-</span> A<span class="sc">%*%</span>Z</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  U <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(X, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  X_j <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">3</span>))<span class="sc">*</span><span class="fu">qt</span>(U, <span class="at">df=</span><span class="dv">3</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  L_j <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sum</span>(<span class="dv">100</span><span class="sc">*</span>(<span class="fu">exp</span>(X_j)<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  L <span class="ot">&lt;-</span> <span class="fu">c</span>(L,L_j)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>L_prime <span class="ot">&lt;-</span> <span class="fu">sort</span>(L, <span class="at">decreasing =</span> T)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>bound <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(n<span class="sc">*</span>(<span class="dv">1</span><span class="fl">-0.99</span>)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>ES_0<span class="fl">.99</span> <span class="ot">&lt;-</span> <span class="fu">sum</span>(L_prime[<span class="dv">1</span><span class="sc">:</span>bound])<span class="sc">/</span>bound</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>VaR_0<span class="fl">.99</span> <span class="ot">&lt;-</span> L_prime[bound]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>VaR_0<span class="fl">.99</span></span></code></pre></div>
<pre><code>## [1] 206.7923</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ES_0<span class="fl">.99</span></span></code></pre></div>
<pre><code>## [1] 244.2151</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(L_prime[L_prime<span class="sc">&gt;-</span><span class="dv">1000</span>], <span class="at">breaks =</span> <span class="dv">10000</span>)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-3-1.png" width="50%" style="float:right; padding:10px" /></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Look page 80 for R_i,j; rho_tau is given in problem-text, and diag is just 1</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#since X is continous hence the probabilities are 1 and 0 </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#(look formula section 8.5)</span></span></code></pre></div>
</div>
<div id="b-clayton-copula" class="section level3">
<h3>(b) Clayton copula</h3>
<p>The simulation in this problem is done using the algorithm on page
79. <span class="math inline">\(\theta\)</span> is defined for the
Clayton copula on page 80:</p>
<p><span class="math display">\[
\theta=\frac{2\cdot \rho}{1-\rho}=\frac{2\cdot 0.4}{1-0.4}
\]</span></p>
<p>It is then possible to simulate from the Clayton copula and
estimate;</p>
<p><span class="math display">\[
VaR_{0.99}(L)= 120.930  ,\hspace{30pt} ES_{0.99}(L)= 181.634
\]</span></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Follow algorithm 10.4 page 79 with theta defined on page 80.</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>theta <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span><span class="fl">0.4</span><span class="sc">/</span>(<span class="dv">1</span><span class="fl">-0.4</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Now we have created R in algorithm</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>L <span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  X <span class="ot">&lt;-</span> <span class="fu">rgamma</span>(<span class="dv">1</span>,<span class="dv">1</span><span class="sc">/</span>theta,<span class="dv">1</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  V <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">log</span>(<span class="fu">runif</span>(<span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">/</span>X</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  U <span class="ot">&lt;-</span> (V<span class="sc">+</span><span class="dv">1</span>)<span class="sc">^</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">/</span>theta)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  X_j <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">3</span>))<span class="sc">*</span><span class="fu">qt</span>(U, <span class="at">df=</span><span class="dv">3</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  L_j <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sum</span>(<span class="dv">100</span><span class="sc">*</span>(<span class="fu">exp</span>(X_j)<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  L <span class="ot">&lt;-</span> <span class="fu">c</span>(L,L_j)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>L_prime <span class="ot">&lt;-</span> <span class="fu">sort</span>(L, <span class="at">decreasing =</span> T)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>bound <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(n<span class="sc">*</span>(<span class="dv">1</span><span class="fl">-0.99</span>)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>ES_0<span class="fl">.99</span> <span class="ot">&lt;-</span> <span class="fu">sum</span>(L_prime[<span class="dv">1</span><span class="sc">:</span>bound])<span class="sc">/</span>bound</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>VaR_0<span class="fl">.99</span> <span class="ot">&lt;-</span> L_prime[bound]</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>VaR_0<span class="fl">.99</span></span></code></pre></div>
<pre><code>## [1] 120.4391</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ES_0<span class="fl">.99</span></span></code></pre></div>
<pre><code>## [1] 187.0663</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(L_prime, <span class="at">breaks =</span> <span class="dv">10000</span>)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-4-1.png" width="50%" style="float:right; padding:10px" /></p>
<p><span class="math inline">\(VaR\)</span> and <span
class="math inline">\(ES\)</span> are radically different for the two
copulas. This could be the case, since the Clayton copula is an
archemedian copula. This matters, since an elliptical copula has radial
symmetry, and thus cant distinguish the dependence between high losses
and high gains like the Clayton copula can. Moreover, as in general,
these 2 copulas have different dependence structure, and thus will
generate different sizes of returns.</p>
</div>
</div>
<div id="problem-2" class="section level2">
<h2>Problem 2</h2>
<div
id="a-propose-an-elliptical-or-other-distribution-which-is-appropriate-for-this-data-and-compute-the-one-day-var_0.99-and-es_0.99."
class="section level3">
<h3>(a) Propose an elliptical (or other) distribution which is
appropriate for this data, and compute the one-day <span
class="math inline">\(VaR_{0.99}\)</span> and <span
class="math inline">\(ES_{0.99}\)</span>.</h3>
<p>As we saw in the homework 1 assigment, that the dax returns data was
approximativly t-distributed with 4 degrees of freedome, we have
likewise checked the bmw returns. Down below you can see the bmw returns
in a qq-plot against the residuals for a t-distribution with 4 df;</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>dax_returns <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;data/dax_returns.txt&quot;</span>,<span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>dax_returns[,<span class="dv">2</span>] <span class="ot">&lt;-</span> dax_returns[,<span class="dv">1</span>]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>dax_returns[,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(dax_returns)[<span class="dv">1</span>]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>bmw_returns <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;data/bmw_returns.txt&quot;</span>,<span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>bmw_returns[,<span class="dv">2</span>] <span class="ot">&lt;-</span> bmw_returns[,<span class="dv">1</span>]</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>bmw_returns[,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(bmw_returns)[<span class="dv">1</span>]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>mu1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(dax_returns[,<span class="dv">2</span>])</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>mu2 <span class="ot">&lt;-</span> <span class="fu">mean</span>(bmw_returns[,<span class="dv">2</span>])</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bmw_returns[,<span class="dv">2</span>], dax_returns[,<span class="dv">2</span>])</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-5-1.png" width="50%" style="float:right; padding:10px" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bmw_returns[,<span class="dv">2</span>]<span class="sc">-</span>mu2, dax_returns[,<span class="dv">2</span>]<span class="sc">-</span>mu1)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-5-2.png" width="50%" style="float:right; padding:10px" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dax_returns, <span class="fu">aes</span>(<span class="at">sample =</span> dax_returns[,<span class="dv">2</span>])) <span class="sc">+</span> <span class="fu">stat_qq</span>(<span class="at">distribution =</span> qt, <span class="at">dparams =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>(<span class="at">distribution =</span> qt, <span class="at">dparams =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-5-3.png" width="50%" style="float:right; padding:10px" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bmw_returns, <span class="fu">aes</span>(<span class="at">sample =</span> bmw_returns[,<span class="dv">2</span>])) <span class="sc">+</span> <span class="fu">stat_qq</span>(<span class="at">distribution =</span> qt, <span class="at">dparams =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>(<span class="at">distribution =</span> qt, <span class="at">dparams =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-5-4.png" width="50%" style="float:right; padding:10px" /></p>
<p>Hence we are proposing the elliptical distribution to be the
multivariate t-distribution with <span class="math display">\[
\Sigma=\begin{bmatrix}
\text{Var(bmw)} &amp; \text{Cov(bmw,dax)}\\
\text{Cov(bmw,dax)} &amp; \text{Var(dax)}
\end{bmatrix}=\begin{bmatrix}
0.0001911 &amp; 0.0001194\\
0.0001194 &amp; 0.0001142
\end{bmatrix}.
\]</span> by example 9.1 for the t-distribution with 4 degrees of
freedom. The following is simulated vs emperical data;</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>mu1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(dax_returns[,<span class="dv">2</span>])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>mu2 <span class="ot">&lt;-</span> <span class="fu">mean</span>(bmw_returns[,<span class="dv">2</span>])</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">c</span>(mu1,mu2)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">var</span>(dax_returns[,<span class="dv">2</span>]),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],bmw_returns[,<span class="dv">2</span>]),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],bmw_returns[,<span class="dv">2</span>]),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">var</span>(bmw_returns[,<span class="dv">2</span>])),</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mvtnorm)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1700</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">rmvt</span>(n,<span class="at">sigma=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">2</span><span class="sc">*</span>sigma, <span class="at">df=</span><span class="dv">4</span>) <span class="sc">+</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">rep</span>(mu[<span class="dv">1</span>],n),<span class="fu">rep</span>(mu[<span class="dv">2</span>],n)),<span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>sim_dat <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> bmw_returns[,<span class="dv">2</span>], <span class="at">y1 =</span> dax_returns[,<span class="dv">2</span>], <span class="at">x2 =</span> X[,<span class="dv">2</span>], <span class="at">y2 =</span> X[,<span class="dv">1</span>])</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim_dat) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y=</span>y1)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x2, <span class="at">y=</span>y2), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="QRM_projects_files/figure-html/unnamed-chunk-6-1.png" width="50%" style="float:right; padding:10px" /></p>
<p>Simulating from this multivariate distribution we are now able to
calculate the losses using the formula on page 8 in HL. Doing this we
can calculate value at risk and expected shortfall as per usual and we
get;</p>
<p><span class="math display">\[
VaR_{0.99}\approx6.023, \hspace{30pt} ES_{0.99}\approx8.33
\]</span></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">c</span>(mu1,mu2)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],bmw_returns[,<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] 0.0001194044</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(dax_returns[,<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] 0.0001141866</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(bmw_returns[,<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] 0.0001910575</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],bmw_returns[,<span class="dv">2</span>]),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">var</span>(dax_returns[,<span class="dv">2</span>]),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],bmw_returns[,<span class="dv">2</span>]),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">var</span>(bmw_returns[,<span class="dv">2</span>])),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>S_n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>dax_returns[,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="sc">-</span>S_n<span class="sc">*</span>(<span class="fu">exp</span>(dax_returns[,<span class="dv">2</span>]) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>dax_returns[,<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">sort</span>(dax_returns[,<span class="dv">3</span>], <span class="at">decreasing =</span> T)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>bmw_returns[,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="sc">-</span>S_n<span class="sc">*</span>(<span class="fu">exp</span>(bmw_returns[,<span class="dv">2</span>]) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>bmw_returns[,<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">sort</span>(bmw_returns[,<span class="dv">3</span>], <span class="at">decreasing =</span> T)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>L <span class="ot">&lt;-</span> bmw_returns[,<span class="dv">4</span>]<span class="sc">+</span>dax_returns[,<span class="dv">4</span>]</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>bound <span class="ot">&lt;-</span> (<span class="dv">1700</span><span class="sc">*</span>(<span class="dv">1</span><span class="fl">-0.99</span>)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>ES_0<span class="fl">.99</span> <span class="ot">&lt;-</span> <span class="fu">sum</span>(L[<span class="dv">1</span><span class="sc">:</span>bound])<span class="sc">/</span>bound</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>VaR_0<span class="fl">.99</span> <span class="ot">&lt;-</span> L[bound]</span></code></pre></div>
</div>
<div
id="b-now-use-the-standard-variance-covariance-method-to-compute-the-one-day-var_0.99.-how-do-your-two-estimates-compare"
class="section level3">
<h3>(b) Now use the standard variance-covariance method to compute the
one-day <span class="math inline">\(VaR_{0.99}\)</span>. How do your two
estimates compare?</h3>
<p>We want to compute the one-day <span
class="math inline">\(VaR_{0.99}\)</span> by the variance-covariance
method. We do this by assuming the linearized approximation of the
losses.</p>
<p><span class="math display">\[
L^{\Delta}_{n+1}=-\sum_{i=1}^{2} a_i\cdot S_n^{i}X_{n+1}^i=-w^T\cdot
X_{n+1}
\]</span></p>
<p>Where</p>
<p><span class="math display">\[
  X_{n+1}=
      \begin{bmatrix}
          X_{n+1}^1\\
          X_{n+1}^2
      \end{bmatrix}
  \sim\mathcal{N}(m,\Sigma)\\
  w=
      \begin{bmatrix}
          a_1\cdot S_n^1\\
          a_2\cdot S_n^2
      \end{bmatrix}
  =
  \begin{bmatrix}
          100\\
          100
  \end{bmatrix}
\]</span></p>
<p>Because we hold one of each stock at price <span
class="math inline">\(100\)</span>.\ We can then estimate <span
class="math inline">\(m\)</span> and <span
class="math inline">\(\Sigma\)</span> from our data and calculate <span
class="math inline">\(VaR_{0.99}\)</span> as the following:</p>
<p><span class="math display">\[
VaR_{0.99}=-w^T\cdot m+\sqrt{w^T\Sigma w}\cdot \Phi^{-1}(0.99)
\]</span></p>
<p>We compute that <span class="math inline">\(VaR_{0.99}\)</span> is
5.37. Which is smaller than the estimate computed in the previous
problem. This might be because the estimate <span
class="math inline">\(e^X\approx 1+x\)</span> underestimates our losses.
A bigger problem might be that as discussed in the previous problem the
t-distribution fits best to the data. Since we assume a normal
distribution in the standard variance-covariance model the quantile is
too small. The normal distribution has lighter tails than the t
distribution. This means the model might not catch the extreme events
very well leading to a more moderate <span
class="math inline">\(VaR\)</span> estimate.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1700</span> <span class="co"># nrow(bmw_returns) = nrow(dax_returns) = 1700</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">100</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>mu1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>n <span class="sc">*</span> <span class="fu">sum</span>(bmw_returns[,<span class="dv">2</span>])</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>mu2 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>n <span class="sc">*</span> <span class="fu">sum</span>(dax_returns[,<span class="dv">2</span>])</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">c</span>(mu1,mu2)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(dax_returns[,<span class="dv">2</span>],dax_returns[,<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] 0.0001141866</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>Sigma11 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(n<span class="dv">-1</span>) <span class="sc">*</span> <span class="fu">sum</span>((bmw_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu1) <span class="sc">*</span> (bmw_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu1))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>Sigma12 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(n<span class="dv">-1</span>) <span class="sc">*</span> <span class="fu">sum</span>((bmw_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu1) <span class="sc">*</span> (dax_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu2))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>Sigma21 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(n<span class="dv">-1</span>) <span class="sc">*</span> <span class="fu">sum</span>((dax_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu2) <span class="sc">*</span> (bmw_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu1))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>Sigma22 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(n<span class="dv">-1</span>) <span class="sc">*</span> <span class="fu">sum</span>((dax_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu2) <span class="sc">*</span> (dax_returns[,<span class="dv">2</span>] <span class="sc">-</span> mu2))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>Sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(Sigma11,Sigma12,Sigma21,Sigma22), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>VaR0<span class="fl">.99</span> <span class="ot">&lt;-</span> <span class="sc">-</span> <span class="fu">t</span>(w)<span class="sc">%*%</span>mu <span class="sc">+</span> <span class="fu">sqrt</span>( <span class="fu">t</span>(w)<span class="sc">%*%</span>Sigma<span class="sc">%*%</span>w )<span class="sc">*</span><span class="fu">qnorm</span>(<span class="fl">0.99</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>VaR0<span class="fl">.99</span></span></code></pre></div>
<pre><code>##          [,1]
## [1,] 5.368659</code></pre>
</div>
</div>
<div id="problem-3" class="section level2">
<h2>Problem 3</h2>
<div id="a" class="section level3">
<h3>(a)</h3>
<p>By proposition 10.7 in Hult &amp; Lindskog the coefficient of upper
tail dependence is <span class="math inline">\(0\)</span> because <span
class="math inline">\((X_1,X_2)\)</span> has normal distributed
marginals.</p>
</div>
<div id="b" class="section level3">
<h3>(b)</h3>
<p>By proposition 10.8 in Hult &amp; Lindskog the coefficient of upper
tail dependence is:</p>
<p><span class="math display">\[
    \lambda_U(X_1,X_2)=2\cdot
\bar{t}_{\nu+1}\left(\sqrt{\nu+1}\frac{\sqrt{1-R_{12}}}{\sqrt{1+R_{12}}}\right)
\]</span></p>
<p>Assuming <span class="math inline">\(\bar{t}_{\nu+1}\)</span> is the
mean the coefficient of upper tail dependence is 0.</p>
</div>
<div id="c" class="section level3">
<h3>(c)</h3>
<p>Firstly we compute the Frank copula. By <span
class="math inline">\(C(u_1,u_2)=\phi(\phi^{-1}(u_1)+\phi^{-1}(u_2))\)</span>.
We need to find the inverse of the generator:</p>
<p><span class="math display">\[
    \phi(t)=-\log\left(\frac{e^{-\theta\cdot
t}-1}{e^{-\theta}-1}\right)\Rightarrow\phi^{-1}(t)=-\frac{1}{\theta}\log\left(e^{-t}(e^{-\theta}-1)+1\right)
\]</span></p>
<p>Then we can compute the copula:</p>
<p><span class="math display">\[
    C(u_1,u_2)=\phi(\phi^{-1}(u_1)+\phi^{-1}(u_2))=-\frac{1}{\theta}\log\left(\frac{(e^{-\theta
u_1}-1)(e^{-\theta u_2}-1)}{e^{-\theta}-1}+1\right)
\]</span></p>
<p>We can now calculate the coefficient of upper tail dependence for
this copula:</p>
<p><span class="math display">\[\begin{align*}
    \lambda_U(X_1,X_2)&amp;=\lim_{u\rightarrow
1}\frac{1-2u+C(u,u)}{1-u}\\
    &amp;=\lim_{u\rightarrow
1}\frac{1-2u-\frac{1}{\theta}\log\left(\frac{(e^{-\theta
u}-1)(e^{-\theta u}-1)}{e^{-\theta}-1}+1\right)}{1-u}\\
    &amp;=\lim_{u\rightarrow 1}2+\frac{1}{\theta}\left(\frac{(e^{-\theta
u}-1)(e^{-\theta
u}-1)}{e^{-\theta}-1}+1\right)^{-1}\frac{1}{e^{-\theta}-1}\left(2(e^{-\theta
u}-1)(-\theta e^{-\theta u})\right)\\
    &amp;=2+\frac{1}{\theta}\left(\frac{(e^{-\theta}-1)(e^{-\theta}-1)}{e^{-\theta}-1}+1\right)^{-1}\frac{1}{e^{-\theta}-1}\left(2(e^{-\theta}-1)(-\theta
e^{-\theta})\right)\\
    &amp;=2-2=0
\end{align*}\]</span></p>
<p>The coefficient of upper tail dependence for the Frank copula is
<span class="math inline">\(0\)</span>.</p>
</div>
</div>
<div id="problem-4" class="section level2">
<h2>Problem 4</h2>
<div id="a-1" class="section level3">
<h3>(a)</h3>
<p>We want to compute the coefficient of upper tail dependence for the
Morgenstern copula. We use the same method as before:</p>
<p><span class="math display">\[\begin{align*}
    \lambda_U(X_1,X_2)&amp;=\lim_{u\rightarrow1}\frac{1-2u+u^2\left(1+\delta(1-u)(1-u))\right)}{1-u}\\
    &amp;=\lim_{u\rightarrow1}-2+2u\left(1+\delta(1-u)(1-u))\right)+u^2\left(\delta2(1-u)(-1))\right)\\
    &amp;=2-2=0
\end{align*}\]</span></p>
<p>The coefficient of upper tail dependence for the Morgenstern copula
is <span class="math inline">\(0\)</span>.</p>
</div>
<div id="b-1" class="section level3">
<h3>(b)</h3>
<p>To show the <span class="math inline">\(\tilde{C}\)</span> is on the
form of (1) we remember that there exists an independent copula (<span
class="math inline">\(C_{12}\)</span>), and thus we see;</p>
<p><span class="math display">\[
    \tilde{C}(u_1,u_2,u_3)=\max[u_1u_2+u_3-1,0]=C_m(C_{12}(u_1,u_2),u_3),
\]</span></p>
<p>where <span
class="math inline">\(C_m(u_1,u_2)=\max[u_1+u_2-1,0]\)</span>, which is
a copula from the calculations done in example 10.5 in HL. Futhermore we
can evaluate the following limit;</p>
<p><span class="math display">\[
    \lim_{t\to\infty}\tilde{C}(u_1^{1/t},u_2^{1/t},u_3^{1/t})^t=\lim_{t\to\infty}\max[u_1^{1/t}u_2^{1/t}+u_3^{1/t}-1,0]^t
\]</span></p>
<p>One can here make the argument that as t grows, <span
class="math inline">\(u_i^{1/t}\to1\)</span>. Therefore we are only
required to evaluate the first part of the max-function; <span
class="math display">\[
    \lim_{t\to\infty}\max[u_1^{1/t}u_2^{1/t}+u_3^{1/t}-1,0]^t=\lim_{t\to\infty}[(u_1u_2)^{1/t}+u_3^{1/t}-1]^t=
    \exp\left(\lim_{t\to\infty}t\cdot\log[(u_1u_2)^{1/t}+u_3^{1/t}-1]\right)
\]</span> From here we substitute the limit variable <span
class="math inline">\(t=\frac{1}{x}\)</span>, and let x go to 0 since
<span class="math inline">\(\frac{1}{0}=\infty\)</span> in the
limit;</p>
<p><span class="math display">\[
\exp\left(\lim_{t\to\infty}t\cdot\log[(u_1u_2)^{1/t}+u_3^{1/t}-1]\right)=\exp\left(\lim_{x\to0}\frac{\log[(u_1u_2)^{x}+u_3^{x}-1]}{x}\right)
\]</span> This is a <span
class="math inline">\(\frac{0}{0}\)</span>-expression, thus we are using
LHopital;</p>
<p><span class="math display">\[
    \exp\left(\lim_{x\to0}\frac{(u_1u_2)^x\log(u_1u_2) +
u_3^x\log(u_3))}{(u_1u_2)^x +
u_3^x-1}\right)=\exp\left(\frac{\log(u_1u_2) +
\log(u_3))}{1}\right)=\exp{\log(u_1u_2u_3)}=u_1u_2u_3.
\]</span></p>
<p>Finally, one can see that <span
class="math inline">\(\tilde{C}\)</span> is not a copula, since we can
choose points <span
class="math inline">\(b=(b_1,b_2,b_3)=(1,1,1)\)</span> and <span
class="math inline">\(a=(a_1,a_2,a_3)=(0.4,0.4,0.4)\)</span> and see
that the 3 dimensional version of condition (B3) in HL def 10.1
yields;</p>
<p><span class="math display">\[\begin{align*}
    \tilde{C}(a_1,a_2,b_3)-\tilde{C}(a_1,a_2,a_3)+\tilde{C}(a_1,b_2,a_3)+\tilde{C}(b_1,a_2,a_3)\\
    +\tilde{C}(b_1,b_2,b_3)
    -\tilde{C}(b_1,b_2,a_3)-\tilde{C}(b_1,a_2,b_3)-\tilde{C}(a_1,b_2,b_3)\\=0.4^2-0+0+0+1-0.4-0.4-0.4&lt;0
\end{align*}\]</span></p>
<p>Hence since we have found points in the 3-dim space a and b, where
<span class="math inline">\(a_i&lt;b_i\)</span> and the combinations are
not greater than or equal to 0, <span
class="math inline">\(\tilde{C}\)</span> can not be a copula.</p>
</div>
<div id="c-1" class="section level3">
<h3>(c)</h3>
<p>What we first want to do, is to create a copula, where each of the
marginals of this copula will be another 2-dimensional copula, only
using the copulas given in the homework paper (<span
class="math inline">\(C_{12},C_{13}\hspace{5pt}\text{and}\hspace{5pt}
C_{23}\)</span>). One can easily see that if i suggest the copula <span
class="math inline">\(C(u_1,u_2,u_3)=u_1u_2u_3[1+\delta(1-u_2)(1-u_3)]\)</span>
this will have the right marginals since;</p>
<p><span class="math display">\[\begin{align*}
    \frac{dC}{du_1}=u_2u_3[1+\delta(1-u_2)(1-u_3)]=C_{23}(u_2,u_3)\\
    \frac{dC}{du_2}=u_1u_3[1+\delta(1-1)(1-u_3)]=u_1u_3=C_{13}(u_1,u_3)\\
    \frac{dC}{du_3}=u_1u_2[1+\delta(1-u_2)(1-1)]=u_1u_2=C_{12}(u_1,u_2)
\end{align*}\]</span></p>
<p>And since all the 2-dim marginals are copulas, C must be a copula
itself. Futhermore, we can find the C from above by using nested
copulas. For instance ponder on <span
class="math inline">\(C(u_1,u_2,u_3)=C_{12}(u_1,C_{23}(u_2,u_3))\)</span>.
Otherwise we can also create new copulas, with 2-dim marginals using
nested copulas such as <span
class="math inline">\(C(u_1,u_2,u_3)=C_{12}(u_1,C_{13}(u_2,u_3))=u_1u_2u_3\)</span>
giving us;</p>
<p><span class="math display">\[
    \frac{dC}{du_1}=u_2u_3=C_{13}(u_2,u_3)\\
    \frac{dC}{du_2}=u_1u_3=C_{13}(u_1,u_3)\\
    \frac{dC}{du_3}=u_1u_2=C_{13}(u_1,u_2).
\]</span></p>
</div>
<div id="d" class="section level3">
<h3>(d)</h3>
<p>We calculate:</p>
<p><span class="math display">\[\begin{align*}
    C_{0,23}(u_1,u_2)&amp;=\lim_{t\rightarrow\infty}C_{23}^t(u_1^{1/t},u_2^{1/t})\\
    &amp;=\lim_{t\rightarrow\infty}\left(u_1^{1/t}u_2^{1/t}(1+\delta(1-u_1^{1/t})(1-u_2^{1/t}))\right)^t\\
    &amp;=u_1u_2\lim_{t\rightarrow\infty}\left(1+\delta(1-u_1^{1/t})(1-u_2^{1/t})\right)^t\\
    &amp;=u_1u_2\lim_{t\rightarrow\infty}exp\left(t\cdot
\log\left(1+\delta(1-u_1^{1/t})(1-u_2^{1/t})\right)\right)\\
    &amp;=u_1u_2\cdot
\exp\left(\lim_{x\rightarrow0}\frac{\log\left(1+\delta(1-u_1^{x})(1-u_2^{x})\right)}{x}\right)\\
    &amp;=u_1u_2\cdot
\exp\left(\lim_{x\rightarrow0}\delta\frac{u_1^x\log(u_1)(u_2^x-1)+u_2^x\log(u_2)(u_1^x-1)}{1+\delta(1-u_1^{x})(1-u_2^{x})}\right)\\
    &amp;=u_1u_2\cdot e^{0}=u_1u_2
\end{align*}\]</span></p>
<p>Next we first observe that <span
class="math inline">\(C_{12}(u_1,C_{0,23}(u_2,u_3))=u_1u_2u_3\)</span>.
Now we compute:</p>
<p><span class="math display">\[\begin{align*}
    \lim_{t\rightarrow\infty}C^t(u_1^{1/t},u_2^{1/t},u_3^{1/t})&amp;=\lim_{t\rightarrow\infty}\left(u_1^{1/t}u_2^{1/t}u_3^{1/t}(1+\delta(1-u_2^{1/t})(1-u_3^{1/t}))\right)^t\\
    &amp;=u_1u_2u_3\lim_{t\rightarrow\infty}\left(1+\delta(1-u_2^{1/t})(1-u_3^{1/t})\right)^t\\
    &amp;=u_1u_2u_3
\end{align*}\]</span></p>
<p>By the previous calculations. Which is exactly what we wanted.</p>
</div>
<div id="e" class="section level3">
<h3>(e)</h3>
<p>First note that from definition of VaR;</p>
<p><span class="math display">\[
    F(VaR_{1-n^{-1}}(X_1))=1-n^{-1}\Rightarrow
a_n=VaR_{1-n^{-1}}=F^{-1}(1-n^{-1})
\]</span></p>
<p>Furthermore we can calculate <span
class="math inline">\(F^{-1}\)</span>;</p>
<p><span class="math display">\[
    x=F(F^{-1}(x))=1-F^{-1}(x)^{-\alpha}\Rightarrow
F^{-1}(x)=(1-x)^{-1/\alpha}
\]</span></p>
<p>Now we can go back and look at <span
class="math inline">\(a_n\)</span>;</p>
<p><span class="math display">\[
    a_n=F^{-1}(1-n^{-1})=(1-1-n^{-1})^{-1/\alpha}=n^{1/\alpha}
\]</span></p>
<p>Now we can evaluate the limit;</p>
<p><span class="math display">\[
    \Phi_\alpha(x):=\lim_{n\to\infty} F^n(a_nx)=\lim_{n\to\infty}
\left(1-(x\cdot n^{1/\alpha})^{-\alpha}\right)^n=\lim_{n\to\infty}\left(
1-\frac{x^{-\alpha}}{n}\right)^n=e^{-x^{-\alpha}}
\]</span></p>
<p>Now, saying the vector <span class="math inline">\((X_1,X_2)\sim
G\)</span> with copula <span class="math inline">\(C_{23}\)</span>, and
<span class="math inline">\(X_1,X_2\sim F\)</span> we can use Sklars
theorem;</p>
<p><span class="math display">\[
    \lim_{n\to\infty}G(a_nx,a_ny)^n=\lim_{n\to\infty}C_{23}(F(a_nx),F(a_ny))^n=\lim_{n\to\infty}\Big(1-\frac{x^{-\alpha}}{n}\Big)^n\Big(1-\frac{y^{-\alpha}}{n}\Big)^n\left[1+\delta(1-1+\frac{x^{-\alpha}}{n})(1-1+\frac{y^{-\alpha}}{n})\right]^n
\]</span></p>
<p>Now note that;</p>
<p><span class="math display">\[
    \lim_{n\to\infty}\left[1+\delta\Big(\frac{x^{-\alpha}}{n}\Big)\Big(\frac{y^{-\alpha}}{n}\Big)\right]^n=\exp\Big(
\lim_{n\to\infty} n \cdot
\log\left(1+\delta\Big(\frac{x^{-\alpha}}{n}\Big)\Big(\frac{y^{-\alpha}}{n}\Big)\right)
\Big)
\]</span></p>
<p>From here we substitute the limit variable <span
class="math inline">\(n=\frac{1}{t}\)</span>, and let t go to 0 since
<span class="math inline">\(\frac{1}{0}=\infty\)</span> in the
limit;</p>
<p><span class="math display">\[
    \exp\left( \lim_{t\to0}
\frac{\log\left(1+\delta\Big(x^{-\alpha}\cdot
t\Big)\Big(y^{-\alpha}\cdot t\Big)\right)}{t} \right)
\]</span></p>
<p>This is a <span class="math inline">\(\frac{0}{0}\)</span>-expression
in the exponent, thus we use LHopital;</p>
<p><span class="math display">\[
    \exp\left( \lim_{t\to0} \frac{2\delta x^{-\alpha}y^{-\alpha}\cdot
t}{\delta x^{-\alpha}y^{-\alpha}\cdot t^2+1} \right)=\exp(0/1)=1
\]</span></p>
<p>And thus we can conclude that;</p>
<p><span class="math display">\[
    \lim_{n\to\infty}G(a_nx,a_ny)^n=\lim_{n\to\infty}\Big(1-\frac{x^{-\alpha}}{n}\Big)^n\Big(1-\frac{y^{-\alpha}}{n}\Big)^n\left[1+\delta(1-1+\frac{x^{-\alpha}}{n})(1-1+\frac{y^{-\alpha}}{n})\right]^n=\Phi_\alpha(x)\Phi_\alpha(y)\cdot
1
\]</span></p>
</div>
</div>
<div id="problem-5" class="section level2">
<h2>Problem 5</h2>
<div id="i-calculating-the-decay-of-mathbfpleftl_nnaright-in-n"
class="section level3">
<h3>(i) Calculating the decay of <span
class="math inline">\(\mathbf{P}\left\{L_n&gt;na\right\}\)</span> in
<span class="math inline">\(n\)</span></h3>
<p>It is assumed that <span class="math inline">\(\{X_i\}\)</span> is an
i.i.d. sequence of Bernoulli variables with probability <span
class="math inline">\(p\)</span>, <span
class="math inline">\(\{Z_i\}\)</span> is an i.i.d. sequence of <span
class="math inline">\(\text{Exp}(\theta)\)</span> variables and
furthermore that these sequences is independent of each other. Then
considering the variable <span class="math inline">\(X_iZ_i\)</span> we
see that for some <span class="math inline">\(u&gt; 0\)</span></p>
<p><span class="math display">\[
\mathbf{P}\left\{X_iZ_i\le u\right\}=1-\mathbf{P}\left\{X_iZ_i&gt;
u\right\}=1-\mathbf{P}\left\{Z_i&gt; u,X_i =1\right\}.
\]</span></p>
<p>Since <span class="math inline">\(X_i\in\{0,1\}\)</span>. By
assumption <span class="math inline">\(X_i\)</span> and <span
class="math inline">\(Z_i\)</span> is independent hence</p>
<p><span class="math display">\[
\mathbf{P}\left\{X_iZ_i\le u\right\} = 1- \mathbf{P}\left\{Z_i&gt;
u\right\}\mathbf{P}\left\{X_i=1\right\}=1-p\exp\{-\theta u\}.
\]</span> The event <span class="math inline">\(\{X_iZ_i=0\}\)</span>
happens with probability <span class="math inline">\(1-p\)</span> since
it is equivalent with <span class="math inline">\(X_i=0\)</span> (where
<span class="math inline">\(\{Z_i=0\}\)</span> is <span
class="math inline">\(\mathbf{P}\)</span>-neglebel). Then it follows
that</p>
<p><span class="math display">\[
dF(t)=(1-p)1_{\{u=0\}}+\theta p\exp\{-\theta u\}dt.
\]</span></p>
<p>Given the interest in the CG-function for <span
class="math inline">\(X_iZ_i\)</span> we see now that</p>
<p><span class="math display">\[
\Lambda(\xi)=\log \kappa(\xi)=\log
\mathbb{E}\left[e^{(X_iZ_i)\xi}\right]=\log \int e^{u\xi}d F
\]</span></p>
<p>Hence calculating the integral yield the recipy for determining the
function <span class="math inline">\(\Lambda^*\)</span>. We have
that</p>
<p><span class="math display">\[
\int e^{u\xi}dF=(1-p)e^{0}+\int_0^\infty e^{u\xi}p\theta e^{-\theta u}\
du=1-p+p\theta\int_0^\infty  e^{( \xi -\theta ) u}\
du=1-p-\frac{p\theta}{\xi -\theta }\left[1-\lim_{u\to \infty}e^{(\xi
-\theta)u}\right].
\]</span></p>
<p>Then for <span class="math inline">\(\xi&lt;\theta\)</span> it
follows that</p>
<p><span class="math display">\[
\kappa(\xi) = 1-p+\frac{p\theta}{\theta-\xi} \to\infty \Longrightarrow
\Lambda(\xi)=\log\left(1-p+\frac{p\theta}{\theta-\xi}\right)\to\infty,\
\xi\to\theta_-.
\]</span></p>
<p>In other words <span class="math inline">\(\Lambda^*\)</span> is
determined given the solution for each <span
class="math inline">\(a\)</span> to the equation.</p>
<p><span class="math display">\[
\frac{\partial}{\partial \xi}\left\{\xi a-\Lambda(\xi)\right\}=0.
\]</span></p>
<p>Solving for <span class="math inline">\(\xi\)</span> gives the
equation.</p>
<p><span class="math display">\[\begin{align*}
0&amp;=\frac{\partial}{\partial \xi}\left\{\xi
a-\Lambda(\xi)\right\}=a-\Lambda&#39;(\xi)=a-\frac{1}{1-p+\frac{p\theta}{\theta-\xi}}\frac{-p\theta}{(\theta-\xi)^2}(-1)=a-\frac{p\theta}{\left(1-p+\frac{p\theta}{\theta-\xi}\right)(\theta-\xi)^2}\\
&amp;=a-\frac{p\theta}{\left(\theta-\xi-p\theta+p\xi+p\theta\right)(\theta-\xi)}=a-\frac{p\theta}{\left(\theta-\xi+p\xi\right)(\theta-\xi)}=a-\frac{p\theta}{\left(\theta+(p-1)\xi\right)(\theta-\xi)}
\end{align*}\]</span></p>
<p>Which may be simplified as</p>
<p><span class="math display">\[
a=\frac{p\theta}{\left(\theta-(1-p)\xi\right)(\theta-\xi)}.
\]</span></p>
<p>Multiplying both sides with the denominator <span
class="math inline">\(\left(\theta-(1-p)\xi\right)(\theta-\xi)\)</span>
gives the second order equation</p>
<p><span class="math display">\[
p\theta=a\left(\theta-(1-p)\xi\right)(\theta-\xi)=(a\theta-a\xi)\left(\theta-(1-p)\xi\right)=a\theta^2-a\theta\xi-a\theta(1-p)\xi+a(1-p)\xi^2
\]</span> Simplifying gives</p>
<p><span class="math display">\[
a(1-p)\xi^2-a\theta(2-p)\xi+(a\theta-p)\theta=0
\]</span></p>
<p>This equation is then solved by the two possible solutions</p>
<p><span class="math display">\[\begin{align*}
\xi&amp;=\frac{a\theta(2-p)}{2a(1-p)}\pm\frac{1}{2a(1-p)}\sqrt{a^2\theta^2(2-p)^2-4a(1-p)(a\theta-p)\theta}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{1}{2a(1-p)}\sqrt{a^2\theta^2(p^2+4-4p)-4a\theta(a\theta-p-a\theta
p+p^2)}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{\sqrt{a\theta}}{2a(1-p)}\sqrt{a\theta(p^2+4-4p)-4(a\theta-p-a\theta
p+p^2)}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{\sqrt{a\theta}}{2a(1-p)}\sqrt{a\theta
p^2+4a\theta-4a\theta p-4a\theta+4p+4a\theta p-4p^2}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{\sqrt{a\theta}}{2a(1-p)}\sqrt{a\theta
p^2+4p -4p^2}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{\sqrt{a\theta
p}}{2a(1-p)}\sqrt{4+(a\theta-4)p}\\
&amp;=\frac{\theta}{2}\frac{2-p}{1-p}\pm\frac{\sqrt{\theta
p}}{2\sqrt{a}(1-p)}\sqrt{4+(a\theta-4)p}
\end{align*}\]</span></p>
<p>That is the possible solutions is</p>
<p><span class="math display">\[
\xi_-=\frac{\theta}{2}\frac{2-p}{1-p}-\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p},\hspace{20pt}\xi_+=\frac{\theta}{2}\frac{2-p}{1-p}+\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}
\]</span></p>
<p>We argue now that the positive <span
class="math inline">\(\xi_+\)</span> yields an number greater than <span
class="math inline">\(\theta\)</span> hence not valid. That is</p>
<p><span class="math display">\[
\theta&lt;\xi_+
=\frac{\theta}{2}\frac{2-p}{1-p}+\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}
\]</span></p>
<p>This is equivalent with</p>
<p><span class="math display">\[
0&lt;\frac{\theta}{2}\frac{2-p}{1-p}-\theta+\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}
\]</span></p>
<p>Dividing by <span class="math inline">\(\theta&gt;0\)</span></p>
<p><span class="math display">\[
0&lt;\frac{1}{2}\frac{2-p}{1-p}-1+\frac{1}{1-p}\frac{\sqrt{
p}}{2\sqrt{a\theta}}\sqrt{4+(a\theta-4)p}
\]</span></p>
<p>However since <span class="math inline">\(\frac{1}{1-p}\frac{\sqrt{
p}}{2\sqrt{a\theta}}\sqrt{4+(a\theta-4)p}\)</span> is a factor of
positive number the product itself is positive hence</p>
<p><span class="math display">\[
\frac{1}{2}\frac{2-p}{1-p}-1+\frac{1}{1-p}\frac{\sqrt{
p}}{2\sqrt{a\theta}}\sqrt{4+(a\theta-4)p}&gt;\frac{1}{2}\frac{2-p}{1-p}-1
\]</span></p>
<p>Evaluation the right yields</p>
<p><span class="math display">\[
\frac{1}{2}\frac{2-p}{1-p}-1=\frac{2-p}{2}\frac{1}{1-p}-1=\frac{1-\frac{p}{2}}{1-p}-1&gt;0
\]</span></p>
<p>Since <span class="math inline">\(1-p/2&gt;1-p\)</span>. Then
combining we have</p>
<p><span class="math display">\[
\frac{1}{2}\frac{2-p}{1-p}-1+\frac{1}{1-p}\frac{\sqrt{
p}}{2\sqrt{a\theta}}\sqrt{4+(a\theta-4)p}&gt;\frac{1-\frac{p}{2}}{1-p}-1&gt;0
\]</span></p>
<p>giving that</p>
<p><span class="math display">\[
\theta&lt;\frac{\theta}{2}\frac{2-p}{1-p}+\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}=\xi_+
\]</span></p>
<p>and the solution is</p>
<p><span class="math display">\[
\xi_{sup}(a)\stackrel{\text{def}}{=}\theta\frac{1-\frac{p}{2}}{1-p}-\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}.
\]</span></p>
<p>The function <span class="math inline">\(\Lambda^*(a)\)</span> is
then</p>
<p><span class="math display">\[
\Lambda^*(a)=\sup_{\xi\in \mathbb{R}}\left\{\xi
a-\Lambda(\xi)\right\}=\sup_{\xi&lt;\theta}\left\{\xi
a-\Lambda(\xi)\right\}= a\xi_{sup}(a)-\Lambda(\xi_{sup}(a)).
\]</span></p>
<p>Inserting <span class="math inline">\(\xi_{sup}(a)\)</span> from
above.</p>
<p><span class="math display">\[
\Lambda^*(a)=a\theta\frac{1-\frac{p}{2}}{1-p}-\frac{1}{1-p}\frac{\sqrt{\theta
a
p}}{2}\sqrt{4+(a\theta-4)p}-\log\left(1-p+\frac{p\theta}{\theta-\theta\frac{1-\frac{p}{2}}{1-p}-\frac{1}{1-p}\frac{\sqrt{\theta
p}}{2\sqrt{a}}\sqrt{4+(a\theta-4)p}}\right)
\]</span></p>
<p>That is</p>
<p><span class="math display">\[
\Lambda^*(a)=a\theta\frac{1-\frac{p}{2}}{1-p}-\frac{1}{1-p}\frac{\sqrt{\theta
a
p}}{2}\sqrt{4+(a\theta-4)p}-\log\left(1-p+\frac{p}{1-\frac{1-\frac{p}{2}}{1-p}-\frac{1}{1-p}\frac{\sqrt{
p}}{2\sqrt{a\theta}}\sqrt{4+(a\theta-4)p}}\right).
\]</span></p>
</div>
<div id="ii-writing-an-approximation-of-var_alpha"
class="section level3">
<h3>(ii) Writing an approximation of <span
class="math inline">\(VaR_\alpha\)</span></h3>
<p>We want to give an estimate of the <span
class="math inline">\(VaR_\alpha\)</span> for the whole portfolio giving
the decay <span
class="math inline">\(\mathbf{P}\left\{L_n&gt;na\right\}\approx
e^{-n\Lambda^*(a)}\)</span> for <span
class="math inline">\(n\to\infty\)</span>. That is we say that some
amount of capital pr. loan <span class="math inline">\(a\)</span> is
required such that with <span class="math inline">\(1-\alpha\)</span>
probability ruin does not occur. We then model the value at risk as
such</p>
<p><span class="math display">\[
\mathbf{P}\left\{L_n&gt;VaR_\alpha\right\}=\mathbf{P}\left\{L_n&gt;n\frac{1}{n}VaR_\alpha\right\}=\mathbf{P}\left\{L_n&gt;na\right\}
\]</span></p>
<p>i.e.<span class="math inline">\(VaR_\alpha=an\)</span> and <span
class="math inline">\(a=\frac{1}{n}VaR_\alpha\)</span>. Our objektive is
then to find a suitable solution to the equation:</p>
<p><span class="math display">\[
\alpha =\mathbf{P}\left\{L_n\leq na\right\}\approx
1-e^{-n\Lambda^*(a)},\hspace{20pt} \Lambda^*(a)=\xi_{sup}(a)\cdot
a-\Lambda(\xi_{sup}(a)),
\]</span></p>
<p>which in turn will give an estimate of <span
class="math inline">\(VaR_\alpha\)</span>. We recall that</p>
<p><span class="math display">\[
\Lambda(\xi_{sup}(a))=\log\left(1-p+p\frac{\theta}{\theta-\xi_{sup}(a)}\right)
\]</span></p>
<p>with <span class="math inline">\(\xi_{sup}(a)\)</span> as in the
previous exercise. From this it follows that</p>
<p><span class="math display">\[
\frac{1}{n}\log(\alpha)=
-\Lambda^*(a)=\log\left(1-p+p\frac{\theta}{\theta-\xi_{sup}(a)}\right)-\xi_{sup}(a)\cdot
a
\]</span></p>
<p>Giving that the inverse <span
class="math inline">\((\Lambda^{*})^{-1}(\lambda)\)</span> exist such
that <span class="math inline">\(((\Lambda^{*})^{-1}\circ
\Lambda^{*})(a)=a\)</span> we could conclude</p>
<p><span class="math display">\[
VaR_\alpha =na=n(\Lambda^{*})^{-1}\left(-\frac{1}{n}\log(\alpha)\right).
\]</span></p>
<p>However since <span class="math inline">\(\Lambda^*\)</span> is
convex and continuous it is does not have an inverse. This expression is
however numerical solvable for small <span
class="math inline">\(\alpha&gt;0\)</span>.</p>
<div style="page-break-after: always;"></div>
<p>We see that the derivative is given by</p>
<p><span class="math display">\[
\frac{\partial}{\partial
a}\Lambda^*(a)=a-\frac{p\theta}{(\theta-\xi_{sup}(a))((1-p)(\theta-\xi_{sup}(a))+p\theta)}\xi&#39;_{sup}(a)
\]</span></p>
<p>where</p>
<p><span class="math display">\[
\xi&#39;_{sup}(a)=\left\{\frac{p\theta(4+(a\theta
-4)p)}{a^2}-\frac{p^2\theta^2}{a}\right\}\frac{1}{4(1-p)\sqrt{\frac{p\theta(4+(a\theta-4)p)}{a}}}
\]</span></p>
<p>Using a first order Taylor approximation arround <span
class="math inline">\(a=\theta\)</span> yields</p>
<p><span class="math display">\[
\Lambda^*(a)=\Lambda^*(\theta)+\Lambda&#39;^*(\theta)(a-\theta)+o(a^2)
\]</span></p>
<p>which gives an approximation to the inverse function of <span
class="math inline">\(\Lambda^*\)</span> that gives an analytical
solution to the <span class="math inline">\(VaR_\alpha\)</span>
since</p>
<p><span class="math display">\[
(\Lambda^{*})^{-1}(l)=\frac{1}{\Lambda&#39;^*(\theta)}\left(l-\Lambda^*(\theta)\right)-\theta
\]</span></p>
<p>hence we may make the approximation</p>
<p><span class="math display">\[
VaR_\alpha \approx
n(\Lambda^{*})^{-1}\left(-\frac{1}{n}\log(\alpha)\right)\approx
\frac{n}{\Lambda&#39;^*(\theta)}\left(-\frac{1}{n}\log(\alpha)-\Lambda^*(\theta)\right)-n\theta
\]</span></p>
<p>That is in detail</p>
<p><span class="math display">\[
VaR_{\alpha}(\alpha,\theta,p)=n\left\{\frac{-\frac{1}{n}\log(\alpha)-\theta
\xi_{sup}(\theta)+\log\left(1-p+\frac{p\theta}{\theta-\xi_{sup}(\theta)}\right)}{\theta-\frac{p\theta}{(\theta-\xi_{sup}(\theta))((1-p)(\theta-\xi_{sup}(\theta))+p\theta)}\xi&#39;_{sup}(\theta)}-\theta\right\},
\]</span></p>
<p>with <span class="math inline">\(\xi_{sup}(a)\)</span> and <span
class="math inline">\(\xi&#39;_{sup}(a)\)</span> as above.</p>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUHJvamVjdHMgaW4gUXVhbnRpdGF0aXZlIFJpc2sgTWFuYWdlbWVudCIKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQotLS0KCmBgYHtyLCBzZXR1cCxpbmNsdWRlPUZBTFNFfQpsaWJyYXJ5KGtuaXRyKQpybShsaXN0ID0gbHMoKSkKb3B0aW9ucyhrbml0ci5kdXBsaWNhdGUubGFiZWwgPSAiYWxsb3ciKQppZiAoa25pdHI6OmlzX2xhdGV4X291dHB1dCgpKSB7CiAga25pdF9ob29rcyRzZXQod3JhcGYgPSBmdW5jdGlvbihiZWZvcmUsIG9wdGlvbnMsIGVudmlyKSB7CiAgaWYgKCFiZWZvcmUpIHsKICAgIG91dHB1dCA8LSB2ZWN0b3IobW9kZSA9ICJjaGFyYWN0ZXIiLCBsZW5ndGggPSBvcHRpb25zJGZpZy5udW0gKyAxKQoKICAgIGZvciAoaSBpbiAxOm9wdGlvbnMkZmlnLm51bSkgewogICAgICBvdXRwdXRbaV0gPC0gc3ByaW50ZigiXFxpbmNsdWRlZ3JhcGhpY3N7JXN9IiwgZmlnX3BhdGgobnVtYmVyID0gaSkpCiAgICB9CgogICAgb3V0cHV0W2krMV0gPC0gIlxcZW5ke3dyYXBmaWd1cmV9IgogICAgb3V0cHV0IDwtIGMoIlxcYmVnaW57d3JhcGZpZ3VyZX17Un17MC41XFx0ZXh0d2lkdGh9IixvdXRwdXQpCiAgICBpZiAobGVuZ3RoKG91dHB1dCk+PSAzKSB7CiAgICAgIHJldHVybihwYXN0ZShvdXRwdXQsIGNvbGxhcHNlID0gIiIpKQogICAgfQogIH0KfSkKICBrbml0cjo6b3B0c19jaHVuayRzZXQoCiAgICBmaWcuc2hvdyA9ICdoaWRlJywKICAgIGVjaG8gPSBGQUxTRQogICkKfSBlbHNlIHsKICBrbml0cjo6a25pdF9ob29rcyRzZXQod3JhcGYgPSBmdW5jdGlvbihiZWZvcmUsIG9wdGlvbnMsIGVudmlyKSB7fSkKICBrbml0cjo6b3B0c19jaHVuayRzZXQoCiAgICBvdXQuZXh0cmEgPSAnc3R5bGU9ImZsb2F0OnJpZ2h0OyBwYWRkaW5nOjEwcHgiJywKICAgIG91dC53aWR0aD0gIjUwJSIKICApCn0KYGBgCgojIEFzc2lnbm1lbnQgMQoKPGlmcmFtZSBzcmM9InBkZi9yZW5kZXIvUVJNLUFzc2lnbm1lbnQxLnBkZiI+PC9pZnJhbWU+CgojIEFzc2lnbm1lbnQgMgoKYGBge3IsZXZhbCA9IFRSVUUsbWVzc2FnZSA9IEZBTFNFLHdhcm5pbmc9RkFMU0UscmVzdWx0cz0naGlkZSd9CnJtYXJrZG93bjo6cmVuZGVyKAogICdRUk0vUVJNLUFzc2lnbm1lbnQyLlJtZCcsCiAgb3V0cHV0X2ZpbGUgPSAiUVJNLUFzc2lnbm1lbnQyLnBkZiIsCiAgb3V0cHV0X2RpciA9ICJwZGYvcmVuZGVyIgopCmBgYAoKPGlmcmFtZSBzcmM9InBkZi9yZW5kZXIvUVJNLUFzc2lnbm1lbnQyLnBkZiI+PC9pZnJhbWU+CgpgYGB7cixpbmNsdWRlPUZBTFNFfQpsaWJyYXJ5KGthYmxlRXh0cmEpCmxpYnJhcnkoZ2dwbG90MikKbGlicmFyeShnZ3B1YnIpCmBgYAoKIyMgUHJvYmxlbSAxCgojIyMgKGEpIEdhdXNzaWFuIGNvcHVsYS4KClRvIHNpbXVsYXRlIGZyb20gYSBnYXVzc2lhbiBjb3B1bGEsIHdlIGhhdmUgZm9sbG93ZWQgdGhlIGFsZ29yaXRobSBmb3VuZCBvbiBwYWdlIDc0IGluIHRoZSBITCBub3Rlcy4gVG8gZmluZCAkUiQgd2UgaGF2ZSB1c2VkIHRoZSAkUl97aSxqfSQgZm9ybXVsYSBmb3VuZCBvbiBwYWdlIDgwIGJlc2lkZXMgdGhlIGdhdXNzaWFuIGNvcHVsYS4gRnV0aGVybW9yZSBub3RpY2UgdGhlIHRoZSBkaWFnb25hbCBvZiAkUiQuIFRvIGZpbmQgdGhlIGNob2xlc2t5IGRlY29tcG9zaXRpb24gd2UgdXNlIHRoZSBidWlsZC1pbiBmdW5jdGlvbiBgY2hvbCgpYCBpbiBSLiBGcm9tIHRoaXMgYWxnb3JpdGhtIHdlIGZpbmQgdGhlIGVzdGltYXRlcyB0byBiZTsKCiQkClZhUl97MC45OX0oTCk9IDIwNi4xNjYgICxcaHNwYWNlezMwcHR9IEVTX3swLjk5fShMKT0gMjQ0LjM2OQokJAoKYGBge3J9CiNXZSBmb2xsb3cgYWxnb3JpdGhtIDEwLjEgdG8gbW9kZWwgdGhlIGRlcGVuZGVuY2Ugc3RydWN0dXJlIG9mIHRoZSAuLi4uClJfaWogPC1zaW4ocGkqMC40LzIpClMgPC0gcmVwKFJfaWosNTAqNTApClIgPC0gbWF0cml4KFMsIG5yb3cgPSA1MCkKZGlhZyhSKSA8LSBzaW4ocGkvMikKCiNOb3cgd2UgaGF2ZSBjcmVhdGVkIFIgaW4gYWxnb3JpdGhtCgpBIDwtIGNob2woUikKTCA8LWMoKQpuIDwtIDEwMDAwMAoKZm9yIChpIGluIDE6bikgewogIFogPC0gcm5vcm0oNTAsMCwxKQogIFggPC0gQSUqJVoKICBVIDwtIHBub3JtKFgsIG1lYW4gPSAwLCBzZD0xKQogIFhfaiA8LSAxLygxMDAqc3FydCgzKSkqcXQoVSwgZGY9MykKICBMX2ogPC0gLXN1bSgxMDAqKGV4cChYX2opLTEpKQogIEwgPC0gYyhMLExfaikKfQpMX3ByaW1lIDwtIHNvcnQoTCwgZGVjcmVhc2luZyA9IFQpCgpib3VuZCA8LSBjZWlsaW5nKG4qKDEtMC45OSkrMSkKRVNfMC45OSA8LSBzdW0oTF9wcmltZVsxOmJvdW5kXSkvYm91bmQKVmFSXzAuOTkgPC0gTF9wcmltZVtib3VuZF0KVmFSXzAuOTkKRVNfMC45OQoKaGlzdChMX3ByaW1lW0xfcHJpbWU+LTEwMDBdLCBicmVha3MgPSAxMDAwMCkKI0xvb2sgcGFnZSA4MCBmb3IgUl9pLGo7IHJob190YXUgaXMgZ2l2ZW4gaW4gcHJvYmxlbS10ZXh0LCBhbmQgZGlhZyBpcyBqdXN0IDEKI3NpbmNlIFggaXMgY29udGlub3VzIGhlbmNlIHRoZSBwcm9iYWJpbGl0aWVzIGFyZSAxIGFuZCAwIAojKGxvb2sgZm9ybXVsYSBzZWN0aW9uIDguNSkKYGBgCgojIyMgKGIpIENsYXl0b24gY29wdWxhCgpUaGUgc2ltdWxhdGlvbiBpbiB0aGlzIHByb2JsZW0gaXMgZG9uZSB1c2luZyB0aGUgYWxnb3JpdGhtIG9uIHBhZ2UgNzkuICRcdGhldGEkIGlzIGRlZmluZWQgZm9yIHRoZSBDbGF5dG9uIGNvcHVsYSBvbiBwYWdlIDgwOgoKJCQKXHRoZXRhPVxmcmFjezJcY2RvdCBccmhvfXsxLVxyaG99PVxmcmFjezJcY2RvdCAwLjR9ezEtMC40fQokJAoKSXQgaXMgdGhlbiBwb3NzaWJsZSB0byBzaW11bGF0ZSBmcm9tIHRoZSBDbGF5dG9uIGNvcHVsYSBhbmQgZXN0aW1hdGU7CgokJApWYVJfezAuOTl9KEwpPSAxMjAuOTMwICAsXGhzcGFjZXszMHB0fSBFU197MC45OX0oTCk9IDE4MS42MzQKJCQKCmBgYHtyfQojRm9sbG93IGFsZ29yaXRobSAxMC40IHBhZ2UgNzkgd2l0aCB0aGV0YSBkZWZpbmVkIG9uIHBhZ2UgODAuCnRoZXRhIDwtIDIqMC40LygxLTAuNCkKCiNOb3cgd2UgaGF2ZSBjcmVhdGVkIFIgaW4gYWxnb3JpdGhtCkwgPC1jKCkKbiA8LSAxMDAwMDAKCmZvciAoaSBpbiAxOm4pIHsKICBYIDwtIHJnYW1tYSgxLDEvdGhldGEsMSkKICBWIDwtIC1sb2cocnVuaWYoNTAsMCwxKSkvWAogIFUgPC0gKFYrMSleKC0xL3RoZXRhKQogIFhfaiA8LSAxLygxMDAqc3FydCgzKSkqcXQoVSwgZGY9MykKICBMX2ogPC0gLXN1bSgxMDAqKGV4cChYX2opLTEpKQogIEwgPC0gYyhMLExfaikKfQpMX3ByaW1lIDwtIHNvcnQoTCwgZGVjcmVhc2luZyA9IFQpCgpib3VuZCA8LSBjZWlsaW5nKG4qKDEtMC45OSkrMSkKRVNfMC45OSA8LSBzdW0oTF9wcmltZVsxOmJvdW5kXSkvYm91bmQKVmFSXzAuOTkgPC0gTF9wcmltZVtib3VuZF0KVmFSXzAuOTkKRVNfMC45OQoKaGlzdChMX3ByaW1lLCBicmVha3MgPSAxMDAwMCkKYGBgCgokVmFSJCBhbmQgJEVTJCBhcmUgcmFkaWNhbGx5IGRpZmZlcmVudCBmb3IgdGhlIHR3byBjb3B1bGFzLiBUaGlzIGNvdWxkIGJlIHRoZSBjYXNlLCBzaW5jZSB0aGUgQ2xheXRvbiBjb3B1bGEgaXMgYW4gYXJjaGVtZWRpYW4gY29wdWxhLiBUaGlzIG1hdHRlcnMsIHNpbmNlIGFuIGVsbGlwdGljYWwgY29wdWxhIGhhcyByYWRpYWwgc3ltbWV0cnksIGFuZCB0aHVzIGNhbnQgZGlzdGluZ3Vpc2ggdGhlIGRlcGVuZGVuY2UgYmV0d2VlbiBoaWdoIGxvc3NlcyBhbmQgaGlnaCBnYWlucyBsaWtlIHRoZSBDbGF5dG9uIGNvcHVsYSBjYW4uIE1vcmVvdmVyLCBhcyBpbiBnZW5lcmFsLCB0aGVzZSAyIGNvcHVsYXMgaGF2ZSBkaWZmZXJlbnQgZGVwZW5kZW5jZSBzdHJ1Y3R1cmUsIGFuZCB0aHVzIHdpbGwgZ2VuZXJhdGUgZGlmZmVyZW50IHNpemVzIG9mIHJldHVybnMuICAKCiMjIFByb2JsZW0gMgoKIyMjIChhKSBQcm9wb3NlIGFuIGVsbGlwdGljYWwgKG9yIG90aGVyKSBkaXN0cmlidXRpb24gd2hpY2ggaXMgYXBwcm9wcmlhdGUgZm9yIHRoaXMgZGF0YSwgYW5kIGNvbXB1dGUgdGhlIG9uZS1kYXkgJFZhUl97MC45OX0kIGFuZCAkRVNfezAuOTl9JC4KCkFzIHdlIHNhdyBpbiB0aGUgaG9tZXdvcmsgMSBhc3NpZ21lbnQsIHRoYXQgdGhlIGRheCByZXR1cm5zIGRhdGEgd2FzIGFwcHJveGltYXRpdmx5IHQtZGlzdHJpYnV0ZWQgd2l0aCA0IGRlZ3JlZXMgb2YgZnJlZWRvbWUsIHdlIGhhdmUgbGlrZXdpc2UgY2hlY2tlZCB0aGUgYm13IHJldHVybnMuIERvd24gYmVsb3cgeW91IGNhbiBzZWUgdGhlIGJtdyByZXR1cm5zIGluIGEgcXEtcGxvdCBhZ2FpbnN0IHRoZSByZXNpZHVhbHMgZm9yIGEgdC1kaXN0cmlidXRpb24gd2l0aCA0IGRmOwoKYGBge3IsbWVzc2FnZT1GQUxTRSx3YXJuaW5nPUZBTFNFfQpsaWJyYXJ5KGRwbHlyKQpkYXhfcmV0dXJucyA8LSByZWFkLmRlbGltKCJkYXRhL2RheF9yZXR1cm5zLnR4dCIsaGVhZGVyID0gVFJVRSkgJT4lIGFzLmRhdGEuZnJhbWUoKQpkYXhfcmV0dXJuc1ssMl0gPC0gZGF4X3JldHVybnNbLDFdCmRheF9yZXR1cm5zWywxXSA8LSAxOmRpbShkYXhfcmV0dXJucylbMV0KYm13X3JldHVybnMgPC0gcmVhZC5kZWxpbSgiZGF0YS9ibXdfcmV0dXJucy50eHQiLGhlYWRlciA9IFRSVUUpICU+JSBhcy5kYXRhLmZyYW1lKCkKYm13X3JldHVybnNbLDJdIDwtIGJtd19yZXR1cm5zWywxXQpibXdfcmV0dXJuc1ssMV0gPC0gMTpkaW0oYm13X3JldHVybnMpWzFdCm11MSA8LSBtZWFuKGRheF9yZXR1cm5zWywyXSkKbXUyIDwtIG1lYW4oYm13X3JldHVybnNbLDJdKQpwbG90KGJtd19yZXR1cm5zWywyXSwgZGF4X3JldHVybnNbLDJdKQpwbG90KGJtd19yZXR1cm5zWywyXS1tdTIsIGRheF9yZXR1cm5zWywyXS1tdTEpCmxpYnJhcnkoZ2dwbG90MikKZ2dwbG90KGRheF9yZXR1cm5zLCBhZXMoc2FtcGxlID0gZGF4X3JldHVybnNbLDJdKSkgKyBzdGF0X3FxKGRpc3RyaWJ1dGlvbiA9IHF0LCBkcGFyYW1zID0gNCkgKwogIHN0YXRfcXFfbGluZShkaXN0cmlidXRpb24gPSBxdCwgZHBhcmFtcyA9IDQpCmdncGxvdChibXdfcmV0dXJucywgYWVzKHNhbXBsZSA9IGJtd19yZXR1cm5zWywyXSkpICsgc3RhdF9xcShkaXN0cmlidXRpb24gPSBxdCwgZHBhcmFtcyA9IDQpICsKICBzdGF0X3FxX2xpbmUoZGlzdHJpYnV0aW9uID0gcXQsIGRwYXJhbXMgPSA0KQpgYGAKCkhlbmNlIHdlIGFyZSBwcm9wb3NpbmcgdGhlIGVsbGlwdGljYWwgZGlzdHJpYnV0aW9uIHRvIGJlIHRoZSBtdWx0aXZhcmlhdGUgdC1kaXN0cmlidXRpb24gd2l0aAokJApcU2lnbWE9XGJlZ2lue2JtYXRyaXh9Clx0ZXh0e1ZhcihibXcpfSAmIFx0ZXh0e0NvdihibXcsZGF4KX1cXApcdGV4dHtDb3YoYm13LGRheCl9ICYgXHRleHR7VmFyKGRheCl9ClxlbmR7Ym1hdHJpeH09XGJlZ2lue2JtYXRyaXh9CjAuMDAwMTkxMSAmIDAuMDAwMTE5NFxcCjAuMDAwMTE5NCAmIDAuMDAwMTE0MgpcZW5ke2JtYXRyaXh9LgokJApieSBleGFtcGxlIDkuMSBmb3IgdGhlIHQtZGlzdHJpYnV0aW9uIHdpdGggNCBkZWdyZWVzIG9mIGZyZWVkb20uIFRoZSBmb2xsb3dpbmcgaXMgc2ltdWxhdGVkIHZzIGVtcGVyaWNhbCBkYXRhOwpgYGB7cn0KbXUxIDwtIG1lYW4oZGF4X3JldHVybnNbLDJdKQptdTIgPC0gbWVhbihibXdfcmV0dXJuc1ssMl0pCm11IDwtIGMobXUxLG11MikKc2lnbWEgPC0gbWF0cml4KAogIGModmFyKGRheF9yZXR1cm5zWywyXSksCiAgICBjb3YoZGF4X3JldHVybnNbLDJdLGJtd19yZXR1cm5zWywyXSksCiAgICBjb3YoZGF4X3JldHVybnNbLDJdLGJtd19yZXR1cm5zWywyXSksCiAgICB2YXIoYm13X3JldHVybnNbLDJdKSksCiAgbnJvdyA9IDIKKQoKbGlicmFyeShtdnRub3JtKQpuIDwtIDE3MDAKWCA8LSBybXZ0KG4sc2lnbWE9MS8yKnNpZ21hLCBkZj00KSArIG1hdHJpeChjKHJlcChtdVsxXSxuKSxyZXAobXVbMl0sbikpLG5jb2wgPSAyKQoKbGlicmFyeShnZ3Bsb3QyKQpzaW1fZGF0ID0gZGF0YS5mcmFtZSh4MSA9IGJtd19yZXR1cm5zWywyXSwgeTEgPSBkYXhfcmV0dXJuc1ssMl0sIHgyID0gWFssMl0sIHkyID0gWFssMV0pCmdncGxvdChzaW1fZGF0KSArIGdlb21fcG9pbnQoYWVzKHggPSB4MSwgeT15MSkpICsgZ2VvbV9wb2ludChhZXMoeCA9IHgyLCB5PXkyKSwgY29sID0gInJlZCIpCmBgYAoKU2ltdWxhdGluZyBmcm9tIHRoaXMgbXVsdGl2YXJpYXRlIGRpc3RyaWJ1dGlvbiB3ZSBhcmUgbm93IGFibGUgdG8gY2FsY3VsYXRlIHRoZSBsb3NzZXMgdXNpbmcgdGhlIGZvcm11bGEgb24gcGFnZSA4IGluIEhMLiBEb2luZyB0aGlzIHdlIGNhbiBjYWxjdWxhdGUgdmFsdWUgYXQgcmlzayBhbmQgZXhwZWN0ZWQgc2hvcnRmYWxsIGFzIHBlciB1c3VhbCBhbmQgd2UgZ2V0OwoKJCQKVmFSX3swLjk5fVxhcHByb3g2LjAyMywgXGhzcGFjZXszMHB0fSBFU197MC45OX1cYXBwcm94OC4zMwokJAoKYGBge3J9Cm11IDwtIGMobXUxLG11MikKY292KGRheF9yZXR1cm5zWywyXSxibXdfcmV0dXJuc1ssMl0pCnZhcihkYXhfcmV0dXJuc1ssMl0pCnZhcihibXdfcmV0dXJuc1ssMl0pCnNpZ21hIDwtIG1hdHJpeCgKICBjKGNvdihkYXhfcmV0dXJuc1ssMl0sYm13X3JldHVybnNbLDJdKSwKICAgIHZhcihkYXhfcmV0dXJuc1ssMl0pLAogICAgY292KGRheF9yZXR1cm5zWywyXSxibXdfcmV0dXJuc1ssMl0pLAogICAgdmFyKGJtd19yZXR1cm5zWywyXSkpLAogIG5yb3cgPSAyCikKU19uIDwtIDEwMAoKZGF4X3JldHVybnNbLDNdIDwtIC1TX24qKGV4cChkYXhfcmV0dXJuc1ssMl0pIC0gMSkKZGF4X3JldHVybnNbLDRdIDwtIHNvcnQoZGF4X3JldHVybnNbLDNdLCBkZWNyZWFzaW5nID0gVCkKYm13X3JldHVybnNbLDNdIDwtIC1TX24qKGV4cChibXdfcmV0dXJuc1ssMl0pIC0gMSkKYm13X3JldHVybnNbLDRdIDwtIHNvcnQoYm13X3JldHVybnNbLDNdLCBkZWNyZWFzaW5nID0gVCkKCkwgPC0gYm13X3JldHVybnNbLDRdK2RheF9yZXR1cm5zWyw0XQoKYm91bmQgPC0gKDE3MDAqKDEtMC45OSkrMSkKRVNfMC45OSA8LSBzdW0oTFsxOmJvdW5kXSkvYm91bmQKVmFSXzAuOTkgPC0gTFtib3VuZF0KYGBgCgoKIyMjIChiKSBOb3cgdXNlIHRoZSBzdGFuZGFyZCB2YXJpYW5jZS1jb3ZhcmlhbmNlIG1ldGhvZCB0byBjb21wdXRlIHRoZSBvbmUtZGF5ICRWYVJfezAuOTl9JC4gSG93IGRvIHlvdXIgdHdvIGVzdGltYXRlcyBjb21wYXJlPwoKV2Ugd2FudCB0byBjb21wdXRlIHRoZSBvbmUtZGF5ICRWYVJfezAuOTl9JCBieSB0aGUgdmFyaWFuY2UtY292YXJpYW5jZSBtZXRob2QuIFdlIGRvIHRoaXMgYnkgYXNzdW1pbmcgdGhlIGxpbmVhcml6ZWQgYXBwcm94aW1hdGlvbiBvZiB0aGUgbG9zc2VzLgoKJCQKTF57XERlbHRhfV97bisxfT0tXHN1bV97aT0xfV57Mn0gYV9pXGNkb3QgU19uXntpfVhfe24rMX1eaT0td15UXGNkb3QgWF97bisxfQokJAoKV2hlcmUgCgokJAogIFhfe24rMX09CiAgICAgIFxiZWdpbntibWF0cml4fQogICAgICAgICAgWF97bisxfV4xXFwKICAgICAgICAgIFhfe24rMX1eMgogICAgICBcZW5ke2JtYXRyaXh9CiAgXHNpbVxtYXRoY2Fse059KG0sXFNpZ21hKVxcCiAgdz0KICAgICAgXGJlZ2lue2JtYXRyaXh9CiAgICAgICAgICBhXzFcY2RvdCBTX25eMVxcCiAgICAgICAgICBhXzJcY2RvdCBTX25eMgogICAgICBcZW5ke2JtYXRyaXh9CiAgPQogIFxiZWdpbntibWF0cml4fQogICAgICAgICAgMTAwXFwKICAgICAgICAgIDEwMAogIFxlbmR7Ym1hdHJpeH0KJCQKCkJlY2F1c2Ugd2UgaG9sZCBvbmUgb2YgZWFjaCBzdG9jayBhdCBwcmljZSAkMTAwJC5cXApXZSBjYW4gdGhlbiBlc3RpbWF0ZSAkbSQgYW5kICRcU2lnbWEkIGZyb20gb3VyIGRhdGEgYW5kIGNhbGN1bGF0ZSAkVmFSX3swLjk5fSQgYXMgdGhlIGZvbGxvd2luZzoKCiQkClZhUl97MC45OX09LXdeVFxjZG90IG0rXHNxcnR7d15UXFNpZ21hIHd9XGNkb3QgXFBoaV57LTF9KDAuOTkpCiQkCgpXZSBjb21wdXRlIHRoYXQgJFZhUl97MC45OX0kIGlzIDUuMzcuIFdoaWNoIGlzIHNtYWxsZXIgdGhhbiB0aGUgZXN0aW1hdGUgY29tcHV0ZWQgaW4gdGhlIHByZXZpb3VzIHByb2JsZW0uIFRoaXMgbWlnaHQgYmUgYmVjYXVzZSB0aGUgZXN0aW1hdGUgJGVeWFxhcHByb3ggMSt4JCB1bmRlcmVzdGltYXRlcyBvdXIgbG9zc2VzLiBBIGJpZ2dlciBwcm9ibGVtIG1pZ2h0IGJlIHRoYXQgYXMgZGlzY3Vzc2VkIGluIHRoZSBwcmV2aW91cyBwcm9ibGVtIHRoZSB0LWRpc3RyaWJ1dGlvbiBmaXRzIGJlc3QgdG8gdGhlIGRhdGEuIFNpbmNlIHdlIGFzc3VtZSBhIG5vcm1hbCBkaXN0cmlidXRpb24gaW4gdGhlIHN0YW5kYXJkIHZhcmlhbmNlLWNvdmFyaWFuY2UgbW9kZWwgdGhlIHF1YW50aWxlIGlzIHRvbyBzbWFsbC4gVGhlIG5vcm1hbCBkaXN0cmlidXRpb24gaGFzIGxpZ2h0ZXIgdGFpbHMgdGhhbiB0aGUgdCBkaXN0cmlidXRpb24uIFRoaXMgbWVhbnMgdGhlIG1vZGVsIG1pZ2h0IG5vdCBjYXRjaCB0aGUgZXh0cmVtZSBldmVudHMgdmVyeSB3ZWxsIGxlYWRpbmcgdG8gYSBtb3JlIG1vZGVyYXRlICRWYVIkIGVzdGltYXRlLgoKYGBge3J9Cm4gPC0gMTcwMCAjIG5yb3coYm13X3JldHVybnMpID0gbnJvdyhkYXhfcmV0dXJucykgPSAxNzAwCgp3IDwtIGMoMTAwLDEwMCkKCm11MSA8LSAxL24gKiBzdW0oYm13X3JldHVybnNbLDJdKQptdTIgPC0gMS9uICogc3VtKGRheF9yZXR1cm5zWywyXSkKbXUgPC0gYyhtdTEsbXUyKQpjb3YoZGF4X3JldHVybnNbLDJdLGRheF9yZXR1cm5zWywyXSkKU2lnbWExMSA8LSAxLyhuLTEpICogc3VtKChibXdfcmV0dXJuc1ssMl0gLSBtdTEpICogKGJtd19yZXR1cm5zWywyXSAtIG11MSkpClNpZ21hMTIgPC0gMS8obi0xKSAqIHN1bSgoYm13X3JldHVybnNbLDJdIC0gbXUxKSAqIChkYXhfcmV0dXJuc1ssMl0gLSBtdTIpKQpTaWdtYTIxIDwtIDEvKG4tMSkgKiBzdW0oKGRheF9yZXR1cm5zWywyXSAtIG11MikgKiAoYm13X3JldHVybnNbLDJdIC0gbXUxKSkKU2lnbWEyMiA8LSAxLyhuLTEpICogc3VtKChkYXhfcmV0dXJuc1ssMl0gLSBtdTIpICogKGRheF9yZXR1cm5zWywyXSAtIG11MikpCgpTaWdtYSA8LSBtYXRyaXgoZGF0YSA9IGMoU2lnbWExMSxTaWdtYTEyLFNpZ21hMjEsU2lnbWEyMiksIG5yb3cgPSAyKQoKVmFSMC45OSA8LSAtIHQodyklKiVtdSArIHNxcnQoIHQodyklKiVTaWdtYSUqJXcgKSpxbm9ybSgwLjk5LDAsMSkKVmFSMC45OQpgYGAKCiMjIFByb2JsZW0gMwoKIyMjIChhKQoKQnkgcHJvcG9zaXRpb24gMTAuNyBpbiBIdWx0IFwmIExpbmRza29nIHRoZSBjb2VmZmljaWVudCBvZiB1cHBlciB0YWlsIGRlcGVuZGVuY2UgaXMgJDAkIGJlY2F1c2UgJChYXzEsWF8yKSQgaGFzIG5vcm1hbCBkaXN0cmlidXRlZCBtYXJnaW5hbHMuCgojIyMgKGIpCgpCeSBwcm9wb3NpdGlvbiAxMC44IGluIEh1bHQgXCYgTGluZHNrb2cgdGhlIGNvZWZmaWNpZW50IG9mIHVwcGVyIHRhaWwgZGVwZW5kZW5jZSBpczoKCiQkCiAgICBcbGFtYmRhX1UoWF8xLFhfMik9MlxjZG90IFxiYXJ7dH1fe1xudSsxfVxsZWZ0KFxzcXJ0e1xudSsxfVxmcmFje1xzcXJ0ezEtUl97MTJ9fX17XHNxcnR7MStSX3sxMn19fVxyaWdodCkKJCQKCkFzc3VtaW5nICRcYmFye3R9X3tcbnUrMX0kIGlzIHRoZSBtZWFuIHRoZSBjb2VmZmljaWVudCBvZiB1cHBlciB0YWlsIGRlcGVuZGVuY2UgaXMgMC4KCiMjIyAoYykKCkZpcnN0bHkgd2UgY29tcHV0ZSB0aGUgRnJhbmsgY29wdWxhLiBCeSAkQyh1XzEsdV8yKT1ccGhpKFxwaGleey0xfSh1XzEpK1xwaGleey0xfSh1XzIpKSQuIFdlIG5lZWQgdG8gZmluZCB0aGUgaW52ZXJzZSBvZiB0aGUgZ2VuZXJhdG9yOgoKJCQKICAgIFxwaGkodCk9LVxsb2dcbGVmdChcZnJhY3tlXnstXHRoZXRhXGNkb3QgdH0tMX17ZV57LVx0aGV0YX0tMX1ccmlnaHQpXFJpZ2h0YXJyb3dccGhpXnstMX0odCk9LVxmcmFjezF9e1x0aGV0YX1cbG9nXGxlZnQoZV57LXR9KGVeey1cdGhldGF9LTEpKzFccmlnaHQpCiQkCgpUaGVuIHdlIGNhbiBjb21wdXRlIHRoZSBjb3B1bGE6CgokJAogICAgQyh1XzEsdV8yKT1ccGhpKFxwaGleey0xfSh1XzEpK1xwaGleey0xfSh1XzIpKT0tXGZyYWN7MX17XHRoZXRhfVxsb2dcbGVmdChcZnJhY3soZV57LVx0aGV0YSB1XzF9LTEpKGVeey1cdGhldGEgdV8yfS0xKX17ZV57LVx0aGV0YX0tMX0rMVxyaWdodCkKJCQKCldlIGNhbiBub3cgY2FsY3VsYXRlIHRoZSBjb2VmZmljaWVudCBvZiB1cHBlciB0YWlsIGRlcGVuZGVuY2UgZm9yIHRoaXMgY29wdWxhOgoKXGJlZ2lue2FsaWduKn0KICAgIFxsYW1iZGFfVShYXzEsWF8yKSY9XGxpbV97dVxyaWdodGFycm93IDF9XGZyYWN7MS0ydStDKHUsdSl9ezEtdX1cXAogICAgJj1cbGltX3t1XHJpZ2h0YXJyb3cgMX1cZnJhY3sxLTJ1LVxmcmFjezF9e1x0aGV0YX1cbG9nXGxlZnQoXGZyYWN7KGVeey1cdGhldGEgdX0tMSkoZV57LVx0aGV0YSB1fS0xKX17ZV57LVx0aGV0YX0tMX0rMVxyaWdodCl9ezEtdX1cXAogICAgJj1cbGltX3t1XHJpZ2h0YXJyb3cgMX0yK1xmcmFjezF9e1x0aGV0YX1cbGVmdChcZnJhY3soZV57LVx0aGV0YSB1fS0xKShlXnstXHRoZXRhIHV9LTEpfXtlXnstXHRoZXRhfS0xfSsxXHJpZ2h0KV57LTF9XGZyYWN7MX17ZV57LVx0aGV0YX0tMX1cbGVmdCgyKGVeey1cdGhldGEgdX0tMSkoLVx0aGV0YSBlXnstXHRoZXRhIHV9KVxyaWdodClcXAogICAgJj0yK1xmcmFjezF9e1x0aGV0YX1cbGVmdChcZnJhY3soZV57LVx0aGV0YX0tMSkoZV57LVx0aGV0YX0tMSl9e2Veey1cdGhldGF9LTF9KzFccmlnaHQpXnstMX1cZnJhY3sxfXtlXnstXHRoZXRhfS0xfVxsZWZ0KDIoZV57LVx0aGV0YX0tMSkoLVx0aGV0YSBlXnstXHRoZXRhfSlccmlnaHQpXFwKICAgICY9Mi0yPTAKXGVuZHthbGlnbip9CgpUaGUgY29lZmZpY2llbnQgb2YgdXBwZXIgdGFpbCBkZXBlbmRlbmNlIGZvciB0aGUgRnJhbmsgY29wdWxhIGlzICQwJC4KCiMjIFByb2JsZW0gNAoKIyMjIChhKQoKV2Ugd2FudCB0byBjb21wdXRlIHRoZSBjb2VmZmljaWVudCBvZiB1cHBlciB0YWlsIGRlcGVuZGVuY2UgZm9yIHRoZSBNb3JnZW5zdGVybiBjb3B1bGEuIFdlIHVzZSB0aGUgc2FtZSBtZXRob2QgYXMgYmVmb3JlOgoKXGJlZ2lue2FsaWduKn0KICAgIFxsYW1iZGFfVShYXzEsWF8yKSY9XGxpbV97dVxyaWdodGFycm93MX1cZnJhY3sxLTJ1K3VeMlxsZWZ0KDErXGRlbHRhKDEtdSkoMS11KSlccmlnaHQpfXsxLXV9XFwKICAgICY9XGxpbV97dVxyaWdodGFycm93MX0tMisydVxsZWZ0KDErXGRlbHRhKDEtdSkoMS11KSlccmlnaHQpK3VeMlxsZWZ0KFxkZWx0YTIoMS11KSgtMSkpXHJpZ2h0KVxcCiAgICAmPTItMj0wClxlbmR7YWxpZ24qfQoKVGhlIGNvZWZmaWNpZW50IG9mIHVwcGVyIHRhaWwgZGVwZW5kZW5jZSBmb3IgdGhlIE1vcmdlbnN0ZXJuIGNvcHVsYSBpcyAkMCQuCgojIyMgKGIpCgpUbyBzaG93IHRoZSAkXHRpbGRle0N9JCBpcyBvbiB0aGUgZm9ybSBvZiAoMSkgd2UgcmVtZW1iZXIgdGhhdCB0aGVyZSBleGlzdHMgYW4gaW5kZXBlbmRlbnQgY29wdWxhICgkQ197MTJ9JCksIGFuZCB0aHVzIHdlIHNlZTsKCiQkCiAgICBcdGlsZGV7Q30odV8xLHVfMix1XzMpPVxtYXhbdV8xdV8yK3VfMy0xLDBdPUNfbShDX3sxMn0odV8xLHVfMiksdV8zKSwKJCQKCndoZXJlICRDX20odV8xLHVfMik9XG1heFt1XzErdV8yLTEsMF0kLCB3aGljaCBpcyBhIGNvcHVsYSBmcm9tIHRoZSBjYWxjdWxhdGlvbnMgZG9uZSBpbiBleGFtcGxlIDEwLjUgaW4gSEwuIEZ1dGhlcm1vcmUgd2UgY2FuIGV2YWx1YXRlIHRoZSBmb2xsb3dpbmcgbGltaXQ7CgokJAogICAgXGxpbV97dFx0b1xpbmZ0eX1cdGlsZGV7Q30odV8xXnsxL3R9LHVfMl57MS90fSx1XzNeezEvdH0pXnQ9XGxpbV97dFx0b1xpbmZ0eX1cbWF4W3VfMV57MS90fXVfMl57MS90fSt1XzNeezEvdH0tMSwwXV50CiQkCgpPbmUgY2FuIGhlcmUgbWFrZSB0aGUgYXJndW1lbnQgdGhhdCBhcyB0IGdyb3dzLCAkdV9pXnsxL3R9XHRvMSQuIFRoZXJlZm9yZSB3ZSBhcmUgb25seSByZXF1aXJlZCB0byBldmFsdWF0ZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgbWF4LWZ1bmN0aW9uOwokJAogICAgXGxpbV97dFx0b1xpbmZ0eX1cbWF4W3VfMV57MS90fXVfMl57MS90fSt1XzNeezEvdH0tMSwwXV50PVxsaW1fe3RcdG9caW5mdHl9Wyh1XzF1XzIpXnsxL3R9K3VfM157MS90fS0xXV50PQogICAgXGV4cFxsZWZ0KFxsaW1fe3RcdG9caW5mdHl9dFxjZG90XGxvZ1sodV8xdV8yKV57MS90fSt1XzNeezEvdH0tMV1ccmlnaHQpCiQkCkZyb20gaGVyZSB3ZSBzdWJzdGl0dXRlIHRoZSBsaW1pdCB2YXJpYWJsZSAkdD1cZnJhY3sxfXt4fSQsIGFuZCBsZXQgeCBnbyB0byAwIHNpbmNlICRcZnJhY3sxfXswfT1caW5mdHkkIGluIHRoZSBsaW1pdDsKCiQkClxleHBcbGVmdChcbGltX3t0XHRvXGluZnR5fXRcY2RvdFxsb2dbKHVfMXVfMileezEvdH0rdV8zXnsxL3R9LTFdXHJpZ2h0KT1cZXhwXGxlZnQoXGxpbV97eFx0bzB9XGZyYWN7XGxvZ1sodV8xdV8yKV57eH0rdV8zXnt4fS0xXX17eH1ccmlnaHQpCiQkClRoaXMgaXMgYSAkXGZyYWN7MH17MH0kLWV4cHJlc3Npb24sIHRodXMgd2UgYXJlIHVzaW5nIEwnSG9waXRhbDsKCiQkCiAgICBcZXhwXGxlZnQoXGxpbV97eFx0bzB9XGZyYWN7KHVfMXVfMileeFxsb2codV8xdV8yKSArIHVfM154XGxvZyh1XzMpKX17KHVfMXVfMileeCArIHVfM154LTF9XHJpZ2h0KT1cZXhwXGxlZnQoXGZyYWN7XGxvZyh1XzF1XzIpICsgXGxvZyh1XzMpKX17MX1ccmlnaHQpPVxleHB7XGxvZyh1XzF1XzJ1XzMpfT11XzF1XzJ1XzMuCiQkCgpGaW5hbGx5LCBvbmUgY2FuIHNlZSB0aGF0ICRcdGlsZGV7Q30kIGlzIG5vdCBhIGNvcHVsYSwgc2luY2Ugd2UgY2FuIGNob29zZSBwb2ludHMgJGI9KGJfMSxiXzIsYl8zKT0oMSwxLDEpJCBhbmQgJGE9KGFfMSxhXzIsYV8zKT0oMC40LDAuNCwwLjQpJCBhbmQgc2VlIHRoYXQgdGhlIDMgZGltZW5zaW9uYWwgdmVyc2lvbiBvZiBjb25kaXRpb24gKEIzKSBpbiBITCBkZWYgMTAuMSB5aWVsZHM7CgpcYmVnaW57YWxpZ24qfQogICAgXHRpbGRle0N9KGFfMSxhXzIsYl8zKS1cdGlsZGV7Q30oYV8xLGFfMixhXzMpK1x0aWxkZXtDfShhXzEsYl8yLGFfMykrXHRpbGRle0N9KGJfMSxhXzIsYV8zKVxcCiAgICArXHRpbGRle0N9KGJfMSxiXzIsYl8zKQogICAgLVx0aWxkZXtDfShiXzEsYl8yLGFfMyktXHRpbGRle0N9KGJfMSxhXzIsYl8zKS1cdGlsZGV7Q30oYV8xLGJfMixiXzMpXFw9MC40XjItMCswKzArMS0wLjQtMC40LTAuNDwwClxlbmR7YWxpZ24qfQoKSGVuY2Ugc2luY2Ugd2UgaGF2ZSBmb3VuZCBwb2ludHMgaW4gdGhlIDMtZGltIHNwYWNlIGEgYW5kIGIsIHdoZXJlICRhX2k8Yl9pJCBhbmQgdGhlIGNvbWJpbmF0aW9ucyBhcmUgbm90IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwLCAkXHRpbGRle0N9JCBjYW4gbm90IGJlIGEgY29wdWxhLgoKIyMjIChjKQoKV2hhdCB3ZSBmaXJzdCB3YW50IHRvIGRvLCBpcyB0byBjcmVhdGUgYSBjb3B1bGEsIHdoZXJlIGVhY2ggb2YgdGhlIG1hcmdpbmFscyBvZiB0aGlzIGNvcHVsYSB3aWxsIGJlIGFub3RoZXIgMi1kaW1lbnNpb25hbCBjb3B1bGEsIG9ubHkgdXNpbmcgdGhlIGNvcHVsYXMgZ2l2ZW4gaW4gdGhlIGhvbWV3b3JrIHBhcGVyICgkQ197MTJ9LENfezEzfVxoc3BhY2V7NXB0fVx0ZXh0e2FuZH1caHNwYWNlezVwdH0gQ197MjN9JCkuIE9uZSBjYW4gZWFzaWx5IHNlZSB0aGF0IGlmIGkgc3VnZ2VzdCB0aGUgY29wdWxhICRDKHVfMSx1XzIsdV8zKT11XzF1XzJ1XzNbMStcZGVsdGEoMS11XzIpKDEtdV8zKV0kIHRoaXMgd2lsbCBoYXZlIHRoZSByaWdodCBtYXJnaW5hbHMgc2luY2U7CgpcYmVnaW57YWxpZ24qfQogICAgXGZyYWN7ZEN9e2R1XzF9PXVfMnVfM1sxK1xkZWx0YSgxLXVfMikoMS11XzMpXT1DX3syM30odV8yLHVfMylcXAogICAgXGZyYWN7ZEN9e2R1XzJ9PXVfMXVfM1sxK1xkZWx0YSgxLTEpKDEtdV8zKV09dV8xdV8zPUNfezEzfSh1XzEsdV8zKVxcCiAgICBcZnJhY3tkQ317ZHVfM309dV8xdV8yWzErXGRlbHRhKDEtdV8yKSgxLTEpXT11XzF1XzI9Q197MTJ9KHVfMSx1XzIpClxlbmR7YWxpZ24qfQoKQW5kIHNpbmNlIGFsbCB0aGUgMi1kaW0gbWFyZ2luYWxzIGFyZSBjb3B1bGFzLCBDIG11c3QgYmUgYSBjb3B1bGEgaXRzZWxmLgpGdXRoZXJtb3JlLCB3ZSBjYW4gZmluZCB0aGUgQyBmcm9tIGFib3ZlIGJ5IHVzaW5nIG5lc3RlZCBjb3B1bGFzLiBGb3IgaW5zdGFuY2UgcG9uZGVyIG9uICRDKHVfMSx1XzIsdV8zKT1DX3sxMn0odV8xLENfezIzfSh1XzIsdV8zKSkkLiBPdGhlcndpc2Ugd2UgY2FuIGFsc28gY3JlYXRlIG5ldyBjb3B1bGFzLCB3aXRoIDItZGltIG1hcmdpbmFscyB1c2luZyBuZXN0ZWQgY29wdWxhcyBzdWNoIGFzICRDKHVfMSx1XzIsdV8zKT1DX3sxMn0odV8xLENfezEzfSh1XzIsdV8zKSk9dV8xdV8ydV8zJCBnaXZpbmcgdXM7CgokJAogICAgXGZyYWN7ZEN9e2R1XzF9PXVfMnVfMz1DX3sxM30odV8yLHVfMylcXAogICAgXGZyYWN7ZEN9e2R1XzJ9PXVfMXVfMz1DX3sxM30odV8xLHVfMylcXAogICAgXGZyYWN7ZEN9e2R1XzN9PXVfMXVfMj1DX3sxM30odV8xLHVfMikuCiQkCgojIyMgKGQpCgpXZSBjYWxjdWxhdGU6CgpcYmVnaW57YWxpZ24qfQogICAgQ197MCwyM30odV8xLHVfMikmPVxsaW1fe3RccmlnaHRhcnJvd1xpbmZ0eX1DX3syM31edCh1XzFeezEvdH0sdV8yXnsxL3R9KVxcCiAgICAmPVxsaW1fe3RccmlnaHRhcnJvd1xpbmZ0eX1cbGVmdCh1XzFeezEvdH11XzJeezEvdH0oMStcZGVsdGEoMS11XzFeezEvdH0pKDEtdV8yXnsxL3R9KSlccmlnaHQpXnRcXAogICAgJj11XzF1XzJcbGltX3t0XHJpZ2h0YXJyb3dcaW5mdHl9XGxlZnQoMStcZGVsdGEoMS11XzFeezEvdH0pKDEtdV8yXnsxL3R9KVxyaWdodCledFxcCiAgICAmPXVfMXVfMlxsaW1fe3RccmlnaHRhcnJvd1xpbmZ0eX1leHBcbGVmdCh0XGNkb3QgXGxvZ1xsZWZ0KDErXGRlbHRhKDEtdV8xXnsxL3R9KSgxLXVfMl57MS90fSlccmlnaHQpXHJpZ2h0KVxcCiAgICAmPXVfMXVfMlxjZG90IFxleHBcbGVmdChcbGltX3t4XHJpZ2h0YXJyb3cwfVxmcmFje1xsb2dcbGVmdCgxK1xkZWx0YSgxLXVfMV57eH0pKDEtdV8yXnt4fSlccmlnaHQpfXt4fVxyaWdodClcXAogICAgJj11XzF1XzJcY2RvdCBcZXhwXGxlZnQoXGxpbV97eFxyaWdodGFycm93MH1cZGVsdGFcZnJhY3t1XzFeeFxsb2codV8xKSh1XzJeeC0xKSt1XzJeeFxsb2codV8yKSh1XzFeeC0xKX17MStcZGVsdGEoMS11XzFee3h9KSgxLXVfMl57eH0pfVxyaWdodClcXAogICAgJj11XzF1XzJcY2RvdCBlXnswfT11XzF1XzIKXGVuZHthbGlnbip9CgpOZXh0IHdlIGZpcnN0IG9ic2VydmUgdGhhdCAkQ197MTJ9KHVfMSxDX3swLDIzfSh1XzIsdV8zKSk9dV8xdV8ydV8zJC4gTm93IHdlIGNvbXB1dGU6CgpcYmVnaW57YWxpZ24qfQogICAgXGxpbV97dFxyaWdodGFycm93XGluZnR5fUNedCh1XzFeezEvdH0sdV8yXnsxL3R9LHVfM157MS90fSkmPVxsaW1fe3RccmlnaHRhcnJvd1xpbmZ0eX1cbGVmdCh1XzFeezEvdH11XzJeezEvdH11XzNeezEvdH0oMStcZGVsdGEoMS11XzJeezEvdH0pKDEtdV8zXnsxL3R9KSlccmlnaHQpXnRcXAogICAgJj11XzF1XzJ1XzNcbGltX3t0XHJpZ2h0YXJyb3dcaW5mdHl9XGxlZnQoMStcZGVsdGEoMS11XzJeezEvdH0pKDEtdV8zXnsxL3R9KVxyaWdodCledFxcCiAgICAmPXVfMXVfMnVfMwpcZW5ke2FsaWduKn0KCkJ5IHRoZSBwcmV2aW91cyBjYWxjdWxhdGlvbnMuIFdoaWNoIGlzIGV4YWN0bHkgd2hhdCB3ZSB3YW50ZWQuCgojIyMgKGUpCgpGaXJzdCBub3RlIHRoYXQgZnJvbSBkZWZpbml0aW9uIG9mIFZhUjsKCiQkCiAgICBGKFZhUl97MS1uXnstMX19KFhfMSkpPTEtbl57LTF9XFJpZ2h0YXJyb3cgYV9uPVZhUl97MS1uXnstMX19PUZeey0xfSgxLW5eey0xfSkKJCQKCkZ1cnRoZXJtb3JlIHdlIGNhbiBjYWxjdWxhdGUgJEZeey0xfSQ7IAoKJCQKICAgIHg9RihGXnstMX0oeCkpPTEtRl57LTF9KHgpXnstXGFscGhhfVxSaWdodGFycm93IEZeey0xfSh4KT0oMS14KV57LTEvXGFscGhhfQokJAoKTm93IHdlIGNhbiBnbyBiYWNrIGFuZCBsb29rIGF0ICRhX24kOyAKCiQkCiAgICBhX249Rl57LTF9KDEtbl57LTF9KT0oMS0xLW5eey0xfSleey0xL1xhbHBoYX09bl57MS9cYWxwaGF9CiQkCgpOb3cgd2UgY2FuIGV2YWx1YXRlIHRoZSBsaW1pdDsKCiQkCiAgICBcUGhpX1xhbHBoYSh4KTo9XGxpbV97blx0b1xpbmZ0eX0gRl5uKGFfbngpPVxsaW1fe25cdG9caW5mdHl9IFxsZWZ0KDEtKHhcY2RvdCBuXnsxL1xhbHBoYX0pXnstXGFscGhhfVxyaWdodClebj1cbGltX3tuXHRvXGluZnR5fVxsZWZ0KCAxLVxmcmFje3heey1cYWxwaGF9fXtufVxyaWdodClebj1lXnsteF57LVxhbHBoYX19CiQkCgoKTm93LCBzYXlpbmcgdGhlIHZlY3RvciAkKFhfMSxYXzIpXHNpbSBHJCB3aXRoIGNvcHVsYSAkQ197MjN9JCwgYW5kICRYXzEsWF8yXHNpbSBGJCB3ZSBjYW4gdXNlIFNrbGFycyB0aGVvcmVtOyAKCiQkCiAgICBcbGltX3tuXHRvXGluZnR5fUcoYV9ueCxhX255KV5uPVxsaW1fe25cdG9caW5mdHl9Q197MjN9KEYoYV9ueCksRihhX255KSlebj1cbGltX3tuXHRvXGluZnR5fVxCaWcoMS1cZnJhY3t4XnstXGFscGhhfX17bn1cQmlnKV5uXEJpZygxLVxmcmFje3leey1cYWxwaGF9fXtufVxCaWcpXm5cbGVmdFsxK1xkZWx0YSgxLTErXGZyYWN7eF57LVxhbHBoYX19e259KSgxLTErXGZyYWN7eV57LVxhbHBoYX19e259KVxyaWdodF1ebgokJAoKTm93IG5vdGUgdGhhdDsKCiQkCiAgICBcbGltX3tuXHRvXGluZnR5fVxsZWZ0WzErXGRlbHRhXEJpZyhcZnJhY3t4XnstXGFscGhhfX17bn1cQmlnKVxCaWcoXGZyYWN7eV57LVxhbHBoYX19e259XEJpZylccmlnaHRdXm49XGV4cFxCaWcoIFxsaW1fe25cdG9caW5mdHl9IG4gXGNkb3QgXGxvZ1xsZWZ0KDErXGRlbHRhXEJpZyhcZnJhY3t4XnstXGFscGhhfX17bn1cQmlnKVxCaWcoXGZyYWN7eV57LVxhbHBoYX19e259XEJpZylccmlnaHQpIFxCaWcpCiQkCgpGcm9tIGhlcmUgd2Ugc3Vic3RpdHV0ZSB0aGUgbGltaXQgdmFyaWFibGUgJG49XGZyYWN7MX17dH0kLCBhbmQgbGV0IHQgZ28gdG8gMCBzaW5jZSAkXGZyYWN7MX17MH09XGluZnR5JCBpbiB0aGUgbGltaXQ7CgokJAogICAgXGV4cFxsZWZ0KCBcbGltX3t0XHRvMH0gXGZyYWN7XGxvZ1xsZWZ0KDErXGRlbHRhXEJpZyh4XnstXGFscGhhfVxjZG90IHRcQmlnKVxCaWcoeV57LVxhbHBoYX1cY2RvdCB0XEJpZylccmlnaHQpfXt0fSBccmlnaHQpCiQkCgpUaGlzIGlzIGEgJFxmcmFjezB9ezB9JC1leHByZXNzaW9uIGluIHRoZSBleHBvbmVudCwgdGh1cyB3ZSB1c2UgTCdIb3BpdGFsOwoKJCQKICAgIFxleHBcbGVmdCggXGxpbV97dFx0bzB9IFxmcmFjezJcZGVsdGEgeF57LVxhbHBoYX15XnstXGFscGhhfVxjZG90IHR9e1xkZWx0YSB4XnstXGFscGhhfXleey1cYWxwaGF9XGNkb3QgdF4yKzF9IFxyaWdodCk9XGV4cCgwLzEpPTEKJCQKCkFuZCB0aHVzIHdlIGNhbiBjb25jbHVkZSB0aGF0OwoKJCQKICAgIFxsaW1fe25cdG9caW5mdHl9RyhhX254LGFfbnkpXm49XGxpbV97blx0b1xpbmZ0eX1cQmlnKDEtXGZyYWN7eF57LVxhbHBoYX19e259XEJpZyleblxCaWcoMS1cZnJhY3t5XnstXGFscGhhfX17bn1cQmlnKV5uXGxlZnRbMStcZGVsdGEoMS0xK1xmcmFje3heey1cYWxwaGF9fXtufSkoMS0xK1xmcmFje3leey1cYWxwaGF9fXtufSlccmlnaHRdXm49XFBoaV9cYWxwaGEoeClcUGhpX1xhbHBoYSh5KVxjZG90IDEKJCQKCiMjIFByb2JsZW0gNQoKIyMjIChpKSBDYWxjdWxhdGluZyB0aGUgZGVjYXkgb2YgJFxtYXRoYmZ7UH1cbGVmdFx7TF9uPm5hXHJpZ2h0XH0kIGluICRuJAoKSXQgaXMgYXNzdW1lZCB0aGF0ICRce1hfaVx9JCBpcyBhbiBpLmkuZC4gc2VxdWVuY2Ugb2YgQmVybm91bGxpIHZhcmlhYmxlcyB3aXRoIHByb2JhYmlsaXR5ICRwJCwgJFx7Wl9pXH0kIGlzIGFuIGkuaS5kLiBzZXF1ZW5jZSBvZiAkXHRleHR7RXhwfShcdGhldGEpJCB2YXJpYWJsZXMgYW5kIGZ1cnRoZXJtb3JlIHRoYXQgdGhlc2Ugc2VxdWVuY2VzIGlzIGluZGVwZW5kZW50IG9mIGVhY2ggb3RoZXIuIFRoZW4gY29uc2lkZXJpbmcgdGhlIHZhcmlhYmxlICRYX2laX2kkIHdlIHNlZSB0aGF0IGZvciBzb21lICR1PiAwJAoKJCQKXG1hdGhiZntQfVxsZWZ0XHtYX2laX2lcbGUgdVxyaWdodFx9PTEtXG1hdGhiZntQfVxsZWZ0XHtYX2laX2k+IHVccmlnaHRcfT0xLVxtYXRoYmZ7UH1cbGVmdFx7Wl9pPiB1LFhfaSA9MVxyaWdodFx9LgokJAoKU2luY2UgJFhfaVxpblx7MCwxXH0kLiBCeSBhc3N1bXB0aW9uICRYX2kkIGFuZCAkWl9pJCBpcyBpbmRlcGVuZGVudCBoZW5jZQoKJCQKXG1hdGhiZntQfVxsZWZ0XHtYX2laX2lcbGUgdVxyaWdodFx9ID0gMS0gXG1hdGhiZntQfVxsZWZ0XHtaX2k+IHVccmlnaHRcfVxtYXRoYmZ7UH1cbGVmdFx7WF9pPTFccmlnaHRcfT0xLXBcZXhwXHstXHRoZXRhIHVcfS4KJCQKVGhlIGV2ZW50ICRce1hfaVpfaT0wXH0kIGhhcHBlbnMgd2l0aCBwcm9iYWJpbGl0eSAkMS1wJCBzaW5jZSBpdCBpcyBlcXVpdmFsZW50IHdpdGggJFhfaT0wJCAod2hlcmUgJFx7Wl9pPTBcfSQgaXMgJFxtYXRoYmZ7UH0kLW5lZ2xlYmVsKS4gVGhlbiBpdCBmb2xsb3dzIHRoYXQKCiQkCmRGKHQpPSgxLXApMV97XHt1PTBcfX0rXHRoZXRhIHBcZXhwXHstXHRoZXRhIHVcfWR0LgokJAoKR2l2ZW4gdGhlIGludGVyZXN0IGluIHRoZSBDRy1mdW5jdGlvbiBmb3IgJFhfaVpfaSQgd2Ugc2VlIG5vdyB0aGF0CgokJApcTGFtYmRhKFx4aSk9XGxvZyBca2FwcGEoXHhpKT1cbG9nIFxtYXRoYmJ7RX1cbGVmdFtlXnsoWF9pWl9pKVx4aX1ccmlnaHRdPVxsb2cgXGludCBlXnt1XHhpfWQgRgokJAoKSGVuY2UgY2FsY3VsYXRpbmcgdGhlIGludGVncmFsIHlpZWxkIHRoZSByZWNpcHkgZm9yIGRldGVybWluaW5nIHRoZSBmdW5jdGlvbiAkXExhbWJkYV4qJC4gV2UgaGF2ZSB0aGF0CgokJApcaW50IGVee3VceGl9ZEY9KDEtcCllXnswfStcaW50XzBeXGluZnR5IGVee3VceGl9cFx0aGV0YSBlXnstXHRoZXRhIHV9XCBkdT0xLXArcFx0aGV0YVxpbnRfMF5caW5mdHkgIGVeeyggXHhpIC1cdGhldGEgKSB1fVwgZHU9MS1wLVxmcmFje3BcdGhldGF9e1x4aSAtXHRoZXRhIH1cbGVmdFsxLVxsaW1fe3VcdG8gXGluZnR5fWVeeyhceGkgLVx0aGV0YSl1fVxyaWdodF0uCiQkCgpUaGVuIGZvciAkXHhpPFx0aGV0YSQgaXQgZm9sbG93cyB0aGF0CgokJApca2FwcGEoXHhpKSA9IDEtcCtcZnJhY3twXHRoZXRhfXtcdGhldGEtXHhpfSBcdG9caW5mdHkgXExvbmdyaWdodGFycm93IFxMYW1iZGEoXHhpKT1cbG9nXGxlZnQoMS1wK1xmcmFje3BcdGhldGF9e1x0aGV0YS1ceGl9XHJpZ2h0KVx0b1xpbmZ0eSxcIFx4aVx0b1x0aGV0YV8tLgokJAoKSW4gb3RoZXIgd29yZHMgJFxMYW1iZGFeKiQgaXMgZGV0ZXJtaW5lZCBnaXZlbiB0aGUgc29sdXRpb24gZm9yIGVhY2ggJGEkIHRvIHRoZSBlcXVhdGlvbi4KCiQkClxmcmFje1xwYXJ0aWFsfXtccGFydGlhbCBceGl9XGxlZnRce1x4aSBhLVxMYW1iZGEoXHhpKVxyaWdodFx9PTAuCiQkCgpTb2x2aW5nIGZvciAkXHhpJCBnaXZlcyB0aGUgZXF1YXRpb24uCgpcYmVnaW57YWxpZ24qfQowJj1cZnJhY3tccGFydGlhbH17XHBhcnRpYWwgXHhpfVxsZWZ0XHtceGkgYS1cTGFtYmRhKFx4aSlccmlnaHRcfT1hLVxMYW1iZGEnKFx4aSk9YS1cZnJhY3sxfXsxLXArXGZyYWN7cFx0aGV0YX17XHRoZXRhLVx4aX19XGZyYWN7LXBcdGhldGF9eyhcdGhldGEtXHhpKV4yfSgtMSk9YS1cZnJhY3twXHRoZXRhfXtcbGVmdCgxLXArXGZyYWN7cFx0aGV0YX17XHRoZXRhLVx4aX1ccmlnaHQpKFx0aGV0YS1ceGkpXjJ9XFwKJj1hLVxmcmFje3BcdGhldGF9e1xsZWZ0KFx0aGV0YS1ceGktcFx0aGV0YStwXHhpK3BcdGhldGFccmlnaHQpKFx0aGV0YS1ceGkpfT1hLVxmcmFje3BcdGhldGF9e1xsZWZ0KFx0aGV0YS1ceGkrcFx4aVxyaWdodCkoXHRoZXRhLVx4aSl9PWEtXGZyYWN7cFx0aGV0YX17XGxlZnQoXHRoZXRhKyhwLTEpXHhpXHJpZ2h0KShcdGhldGEtXHhpKX0KXGVuZHthbGlnbip9CgpXaGljaCBtYXkgYmUgc2ltcGxpZmllZCBhcwoKJCQKYT1cZnJhY3twXHRoZXRhfXtcbGVmdChcdGhldGEtKDEtcClceGlccmlnaHQpKFx0aGV0YS1ceGkpfS4KJCQKCk11bHRpcGx5aW5nIGJvdGggc2lkZXMgd2l0aCB0aGUgZGVub21pbmF0b3IgJFxsZWZ0KFx0aGV0YS0oMS1wKVx4aVxyaWdodCkoXHRoZXRhLVx4aSkkIGdpdmVzIHRoZSBzZWNvbmQgb3JkZXIgZXF1YXRpb24KCiQkCnBcdGhldGE9YVxsZWZ0KFx0aGV0YS0oMS1wKVx4aVxyaWdodCkoXHRoZXRhLVx4aSk9KGFcdGhldGEtYVx4aSlcbGVmdChcdGhldGEtKDEtcClceGlccmlnaHQpPWFcdGhldGFeMi1hXHRoZXRhXHhpLWFcdGhldGEoMS1wKVx4aSthKDEtcClceGleMgokJApTaW1wbGlmeWluZyBnaXZlcwoKJCQKYSgxLXApXHhpXjItYVx0aGV0YSgyLXApXHhpKyhhXHRoZXRhLXApXHRoZXRhPTAKJCQKClRoaXMgZXF1YXRpb24gaXMgdGhlbiBzb2x2ZWQgYnkgdGhlIHR3byBwb3NzaWJsZSBzb2x1dGlvbnMKClxiZWdpbnthbGlnbip9Clx4aSY9XGZyYWN7YVx0aGV0YSgyLXApfXsyYSgxLXApfVxwbVxmcmFjezF9ezJhKDEtcCl9XHNxcnR7YV4yXHRoZXRhXjIoMi1wKV4yLTRhKDEtcCkoYVx0aGV0YS1wKVx0aGV0YX1cXAomPVxmcmFje1x0aGV0YX17Mn1cZnJhY3syLXB9ezEtcH1ccG1cZnJhY3sxfXsyYSgxLXApfVxzcXJ0e2FeMlx0aGV0YV4yKHBeMis0LTRwKS00YVx0aGV0YShhXHRoZXRhLXAtYVx0aGV0YSBwK3BeMil9XFwKJj1cZnJhY3tcdGhldGF9ezJ9XGZyYWN7Mi1wfXsxLXB9XHBtXGZyYWN7XHNxcnR7YVx0aGV0YX19ezJhKDEtcCl9XHNxcnR7YVx0aGV0YShwXjIrNC00cCktNChhXHRoZXRhLXAtYVx0aGV0YSBwK3BeMil9XFwKJj1cZnJhY3tcdGhldGF9ezJ9XGZyYWN7Mi1wfXsxLXB9XHBtXGZyYWN7XHNxcnR7YVx0aGV0YX19ezJhKDEtcCl9XHNxcnR7YVx0aGV0YSBwXjIrNGFcdGhldGEtNGFcdGhldGEgcC00YVx0aGV0YSs0cCs0YVx0aGV0YSBwLTRwXjJ9XFwKJj1cZnJhY3tcdGhldGF9ezJ9XGZyYWN7Mi1wfXsxLXB9XHBtXGZyYWN7XHNxcnR7YVx0aGV0YX19ezJhKDEtcCl9XHNxcnR7YVx0aGV0YSBwXjIrNHAgLTRwXjJ9XFwKJj1cZnJhY3tcdGhldGF9ezJ9XGZyYWN7Mi1wfXsxLXB9XHBtXGZyYWN7XHNxcnR7YVx0aGV0YSBwfX17MmEoMS1wKX1cc3FydHs0KyhhXHRoZXRhLTQpcH1cXAomPVxmcmFje1x0aGV0YX17Mn1cZnJhY3syLXB9ezEtcH1ccG1cZnJhY3tcc3FydHtcdGhldGEgcH19ezJcc3FydHthfSgxLXApfVxzcXJ0ezQrKGFcdGhldGEtNClwfSAKXGVuZHthbGlnbip9CgpUaGF0IGlzIHRoZSBwb3NzaWJsZSBzb2x1dGlvbnMgaXMKCiQkClx4aV8tPVxmcmFje1x0aGV0YX17Mn1cZnJhY3syLXB9ezEtcH0tXGZyYWN7MX17MS1wfVxmcmFje1xzcXJ0e1x0aGV0YSBwfX17MlxzcXJ0e2F9fVxzcXJ0ezQrKGFcdGhldGEtNClwfSxcaHNwYWNlezIwcHR9XHhpXys9XGZyYWN7XHRoZXRhfXsyfVxmcmFjezItcH17MS1wfStcZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7XHRoZXRhIHB9fXsyXHNxcnR7YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9CiQkCgpXZSBhcmd1ZSBub3cgdGhhdCB0aGUgcG9zaXRpdmUgJFx4aV8rJCB5aWVsZHMgYW4gbnVtYmVyIGdyZWF0ZXIgdGhhbiAkXHRoZXRhJCBoZW5jZSBub3QgdmFsaWQuIFRoYXQgaXMKCiQkClx0aGV0YTxceGlfKyA9XGZyYWN7XHRoZXRhfXsyfVxmcmFjezItcH17MS1wfStcZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7XHRoZXRhIHB9fXsyXHNxcnR7YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9CiQkCgpUaGlzIGlzIGVxdWl2YWxlbnQgd2l0aAoKJCQKMDxcZnJhY3tcdGhldGF9ezJ9XGZyYWN7Mi1wfXsxLXB9LVx0aGV0YStcZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7XHRoZXRhIHB9fXsyXHNxcnR7YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9CiQkCgpEaXZpZGluZyBieSAkXHRoZXRhPjAkCgokJAowPFxmcmFjezF9ezJ9XGZyYWN7Mi1wfXsxLXB9LTErXGZyYWN7MX17MS1wfVxmcmFje1xzcXJ0eyBwfX17MlxzcXJ0e2FcdGhldGF9fVxzcXJ0ezQrKGFcdGhldGEtNClwfQokJAoKSG93ZXZlciBzaW5jZSAkXGZyYWN7MX17MS1wfVxmcmFje1xzcXJ0eyBwfX17MlxzcXJ0e2FcdGhldGF9fVxzcXJ0ezQrKGFcdGhldGEtNClwfSQgaXMgYSBmYWN0b3Igb2YgcG9zaXRpdmUgbnVtYmVyIHRoZSBwcm9kdWN0IGl0c2VsZiBpcyBwb3NpdGl2ZSBoZW5jZQoKJCQKXGZyYWN7MX17Mn1cZnJhY3syLXB9ezEtcH0tMStcZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7IHB9fXsyXHNxcnR7YVx0aGV0YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9PlxmcmFjezF9ezJ9XGZyYWN7Mi1wfXsxLXB9LTEKJCQKCkV2YWx1YXRpb24gdGhlIHJpZ2h0IHlpZWxkcwoKJCQKXGZyYWN7MX17Mn1cZnJhY3syLXB9ezEtcH0tMT1cZnJhY3syLXB9ezJ9XGZyYWN7MX17MS1wfS0xPVxmcmFjezEtXGZyYWN7cH17Mn19ezEtcH0tMT4wCiQkCgpTaW5jZSAkMS1wLzI+MS1wJC4gVGhlbiBjb21iaW5pbmcgd2UgaGF2ZQoKJCQKXGZyYWN7MX17Mn1cZnJhY3syLXB9ezEtcH0tMStcZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7IHB9fXsyXHNxcnR7YVx0aGV0YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9PlxmcmFjezEtXGZyYWN7cH17Mn19ezEtcH0tMT4wCiQkCgpnaXZpbmcgdGhhdAoKJCQKXHRoZXRhPFxmcmFje1x0aGV0YX17Mn1cZnJhY3syLXB9ezEtcH0rXGZyYWN7MX17MS1wfVxmcmFje1xzcXJ0e1x0aGV0YSBwfX17MlxzcXJ0e2F9fVxzcXJ0ezQrKGFcdGhldGEtNClwfT1ceGlfKwokJAoKYW5kIHRoZSBzb2x1dGlvbiBpcyAKCiQkClx4aV97c3VwfShhKVxzdGFja3JlbHtcdGV4dHtkZWZ9fXs9fVx0aGV0YVxmcmFjezEtXGZyYWN7cH17Mn19ezEtcH0tXGZyYWN7MX17MS1wfVxmcmFje1xzcXJ0e1x0aGV0YSBwfX17MlxzcXJ0e2F9fVxzcXJ0ezQrKGFcdGhldGEtNClwfS4KJCQKClRoZSBmdW5jdGlvbiAkXExhbWJkYV4qKGEpJCBpcyB0aGVuCgokJApcTGFtYmRhXiooYSk9XHN1cF97XHhpXGluIFxtYXRoYmJ7Un19XGxlZnRce1x4aSBhLVxMYW1iZGEoXHhpKVxyaWdodFx9PVxzdXBfe1x4aTxcdGhldGF9XGxlZnRce1x4aSBhLVxMYW1iZGEoXHhpKVxyaWdodFx9PSBhXHhpX3tzdXB9KGEpLVxMYW1iZGEoXHhpX3tzdXB9KGEpKS4KJCQKCkluc2VydGluZyAkXHhpX3tzdXB9KGEpJCBmcm9tIGFib3ZlLgoKJCQKXExhbWJkYV4qKGEpPWFcdGhldGFcZnJhY3sxLVxmcmFje3B9ezJ9fXsxLXB9LVxmcmFjezF9ezEtcH1cZnJhY3tcc3FydHtcdGhldGEgYSBwfX17Mn1cc3FydHs0KyhhXHRoZXRhLTQpcH0tXGxvZ1xsZWZ0KDEtcCtcZnJhY3twXHRoZXRhfXtcdGhldGEtXHRoZXRhXGZyYWN7MS1cZnJhY3twfXsyfX17MS1wfS1cZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7XHRoZXRhIHB9fXsyXHNxcnR7YX19XHNxcnR7NCsoYVx0aGV0YS00KXB9fVxyaWdodCkKJCQKClRoYXQgaXMKCiQkClxMYW1iZGFeKihhKT1hXHRoZXRhXGZyYWN7MS1cZnJhY3twfXsyfX17MS1wfS1cZnJhY3sxfXsxLXB9XGZyYWN7XHNxcnR7XHRoZXRhIGEgcH19ezJ9XHNxcnR7NCsoYVx0aGV0YS00KXB9LVxsb2dcbGVmdCgxLXArXGZyYWN7cH17MS1cZnJhY3sxLVxmcmFje3B9ezJ9fXsxLXB9LVxmcmFjezF9ezEtcH1cZnJhY3tcc3FydHsgcH19ezJcc3FydHthXHRoZXRhfX1cc3FydHs0KyhhXHRoZXRhLTQpcH19XHJpZ2h0KS4KJCQKCiMjIyAoaWkpIFdyaXRpbmcgYW4gYXBwcm94aW1hdGlvbiBvZiAkVmFSX1xhbHBoYSQKCldlIHdhbnQgdG8gZ2l2ZSBhbiBlc3RpbWF0ZSBvZiB0aGUgJFZhUl9cYWxwaGEkIGZvciB0aGUgd2hvbGUgcG9ydGZvbGlvIGdpdmluZyB0aGUgZGVjYXkgJFxtYXRoYmZ7UH1cbGVmdFx7TF9uPm5hXHJpZ2h0XH1cYXBwcm94IGVeey1uXExhbWJkYV4qKGEpfSQgZm9yICRuXHRvXGluZnR5JC4gVGhhdCBpcyB3ZSBzYXkgdGhhdCBzb21lIGFtb3VudCBvZiBjYXBpdGFsIHByLiBsb2FuICRhJCBpcyByZXF1aXJlZCBzdWNoIHRoYXQgd2l0aCAkMS1cYWxwaGEkIHByb2JhYmlsaXR5IHJ1aW4gZG9lcyBub3Qgb2NjdXIuIFdlIHRoZW4gbW9kZWwgdGhlIHZhbHVlIGF0IHJpc2sgYXMgc3VjaAoKJCQKXG1hdGhiZntQfVxsZWZ0XHtMX24+VmFSX1xhbHBoYVxyaWdodFx9PVxtYXRoYmZ7UH1cbGVmdFx7TF9uPm5cZnJhY3sxfXtufVZhUl9cYWxwaGFccmlnaHRcfT1cbWF0aGJme1B9XGxlZnRce0xfbj5uYVxyaWdodFx9CiQkCgppLmUuICRWYVJfXGFscGhhPWFuJCBhbmQgJGE9XGZyYWN7MX17bn1WYVJfXGFscGhhJC4gT3VyIG9iamVrdGl2ZSBpcyB0aGVuIHRvIGZpbmQgYSBzdWl0YWJsZSBzb2x1dGlvbiB0byB0aGUgZXF1YXRpb246CgokJApcYWxwaGEgPVxtYXRoYmZ7UH1cbGVmdFx7TF9uXGxlcSBuYVxyaWdodFx9XGFwcHJveCAxLWVeey1uXExhbWJkYV4qKGEpfSxcaHNwYWNlezIwcHR9IFxMYW1iZGFeKihhKT1ceGlfe3N1cH0oYSlcY2RvdCBhLVxMYW1iZGEoXHhpX3tzdXB9KGEpKSwKJCQKCndoaWNoIGluIHR1cm4gd2lsbCBnaXZlIGFuIGVzdGltYXRlIG9mICRWYVJfXGFscGhhJC4gV2UgcmVjYWxsIHRoYXQKCiQkClxMYW1iZGEoXHhpX3tzdXB9KGEpKT1cbG9nXGxlZnQoMS1wK3BcZnJhY3tcdGhldGF9e1x0aGV0YS1ceGlfe3N1cH0oYSl9XHJpZ2h0KQokJAoKd2l0aCAkXHhpX3tzdXB9KGEpJCBhcyBpbiB0aGUgcHJldmlvdXMgZXhlcmNpc2UuIEZyb20gdGhpcyBpdCBmb2xsb3dzIHRoYXQKCiQkClxmcmFjezF9e259XGxvZyhcYWxwaGEpPSAtXExhbWJkYV4qKGEpPVxsb2dcbGVmdCgxLXArcFxmcmFje1x0aGV0YX17XHRoZXRhLVx4aV97c3VwfShhKX1ccmlnaHQpLVx4aV97c3VwfShhKVxjZG90IGEKJCQKCkdpdmluZyB0aGF0IHRoZSBpbnZlcnNlICQoXExhbWJkYV57Kn0pXnstMX0oXGxhbWJkYSkkIGV4aXN0IHN1Y2ggdGhhdCAkKChcTGFtYmRhXnsqfSleey0xfVxjaXJjIFxMYW1iZGFeeyp9KShhKT1hJCB3ZSBjb3VsZCBjb25jbHVkZQoKJCQKVmFSX1xhbHBoYSA9bmE9bihcTGFtYmRhXnsqfSleey0xfVxsZWZ0KC1cZnJhY3sxfXtufVxsb2coXGFscGhhKVxyaWdodCkuCiQkCgpIb3dldmVyIHNpbmNlICRcTGFtYmRhXiokIGlzIGNvbnZleCBhbmQgY29udGludW91cyBpdCBpcyBkb2VzIG5vdCBoYXZlIGFuIGludmVyc2UuIFRoaXMgZXhwcmVzc2lvbiBpcyBob3dldmVyIG51bWVyaWNhbCBzb2x2YWJsZSBmb3Igc21hbGwgJFxhbHBoYT4wJC4KClxwYWdlYnJlYWsKCldlIHNlZSB0aGF0IHRoZSBkZXJpdmF0aXZlIGlzIGdpdmVuIGJ5CgokJApcZnJhY3tccGFydGlhbH17XHBhcnRpYWwgYX1cTGFtYmRhXiooYSk9YS1cZnJhY3twXHRoZXRhfXsoXHRoZXRhLVx4aV97c3VwfShhKSkoKDEtcCkoXHRoZXRhLVx4aV97c3VwfShhKSkrcFx0aGV0YSl9XHhpJ197c3VwfShhKQokJAoKd2hlcmUKCiQkClx4aSdfe3N1cH0oYSk9XGxlZnRce1xmcmFje3BcdGhldGEoNCsoYVx0aGV0YSAtNClwKX17YV4yfS1cZnJhY3twXjJcdGhldGFeMn17YX1ccmlnaHRcfVxmcmFjezF9ezQoMS1wKVxzcXJ0e1xmcmFje3BcdGhldGEoNCsoYVx0aGV0YS00KXApfXthfX19CiQkCgpVc2luZyBhIGZpcnN0IG9yZGVyIFRheWxvciBhcHByb3hpbWF0aW9uIGFycm91bmQgJGE9XHRoZXRhJCB5aWVsZHMKCiQkClxMYW1iZGFeKihhKT1cTGFtYmRhXiooXHRoZXRhKStcTGFtYmRhJ14qKFx0aGV0YSkoYS1cdGhldGEpK28oYV4yKQokJAoKd2hpY2ggZ2l2ZXMgYW4gYXBwcm94aW1hdGlvbiB0byB0aGUgaW52ZXJzZSBmdW5jdGlvbiBvZiAkXExhbWJkYV4qJCB0aGF0IGdpdmVzIGFuIGFuYWx5dGljYWwgc29sdXRpb24gdG8gdGhlICRWYVJfXGFscGhhJCBzaW5jZQoKJCQKKFxMYW1iZGFeeyp9KV57LTF9KGwpPVxmcmFjezF9e1xMYW1iZGEnXiooXHRoZXRhKX1cbGVmdChsLVxMYW1iZGFeKihcdGhldGEpXHJpZ2h0KS1cdGhldGEKJCQKCmhlbmNlIHdlIG1heSBtYWtlIHRoZSBhcHByb3hpbWF0aW9uCgokJApWYVJfXGFscGhhIFxhcHByb3ggbihcTGFtYmRhXnsqfSleey0xfVxsZWZ0KC1cZnJhY3sxfXtufVxsb2coXGFscGhhKVxyaWdodClcYXBwcm94IFxmcmFje259e1xMYW1iZGEnXiooXHRoZXRhKX1cbGVmdCgtXGZyYWN7MX17bn1cbG9nKFxhbHBoYSktXExhbWJkYV4qKFx0aGV0YSlccmlnaHQpLW5cdGhldGEKJCQKClRoYXQgaXMgaW4gZGV0YWlsCgokJApWYVJfe1xhbHBoYX0oXGFscGhhLFx0aGV0YSxwKT1uXGxlZnRce1xmcmFjey1cZnJhY3sxfXtufVxsb2coXGFscGhhKS1cdGhldGEgXHhpX3tzdXB9KFx0aGV0YSkrXGxvZ1xsZWZ0KDEtcCtcZnJhY3twXHRoZXRhfXtcdGhldGEtXHhpX3tzdXB9KFx0aGV0YSl9XHJpZ2h0KX17XHRoZXRhLVxmcmFje3BcdGhldGF9eyhcdGhldGEtXHhpX3tzdXB9KFx0aGV0YSkpKCgxLXApKFx0aGV0YS1ceGlfe3N1cH0oXHRoZXRhKSkrcFx0aGV0YSl9XHhpJ197c3VwfShcdGhldGEpfS1cdGhldGFccmlnaHRcfSwKJCQKCndpdGggJFx4aV97c3VwfShhKSQgYW5kICRceGknX3tzdXB9KGEpJCBhcyBhYm92ZS4=</div>
<style>
  footer{
    background: rgb(34,34,34);
    width:100%;
    height:150px; /*Same as main-container padding in bottom!!*/
    position:absolute;
    bottom:0;
    left:0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    text-align: center;
}
footer h3{
    font-size: 2.1rem;
    font-weight: bold;
    text-transform: capitalize;
    line-height: 3rem;
    color:white;
}
footer p{
    max-width: 500px;
    margin: 10px auto;
    line-height: 28px;
    font-size: 14px;
    color: #cacdd2;
}
</style>

<script>
$(function() {
  $('.main-container').after($('footer'));
})
</script>


<footer>

<h3>Msc in Actuarial Mathematics</h3>
<p>This website is made to organize the content of the education including preparement for exams and exercise classes.</p>
</footer>

<!--
References:
https://foolishdeveloper.com/simple-responsive-footer-design-using-html-and-css/
https://stackoverflow.com/questions/7202427/make-footer-take-remianing-bottom-space-using-css
https://github.com/rstudio/rmarkdown/issues/1761
-->


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("QRM_projects.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
